/*! For license information please see main.7dd3824f.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),i=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case x:return"Profiler";case k:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function Y(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,ke=null;function xe(e){if(e=wi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=Ei(t),_e(e.stateNode,e.type,t))}}function Te(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Ce(){if(Se){var e=Se,t=ke;if(ke=Se=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==Se||null!==ke)&&(Ne(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){Pe=!1}function Oe(e,t,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function Be(e,t,n,r,i,a,s,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=dt(o):0!==(a&=s)&&(r=dt(a))}else 0!==(s=n&~i)?r=dt(s):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,_t,St,kt,xt,Tt=!1,Ct=[],It=null,Nt=null,At=null,Dt=new Map,Rt=new Map,Pt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void xt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Tt=!1,null!==It&&Ut(It)&&(It=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Dt.forEach(Ft),Rt.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=wt,a=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,qt.transition=a}}function Kt(e,t,n,r){var i=wt,a=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,qt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=$t(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var a=wi(i);if(null!==a&&Et(a),null===(a=$t(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=vi(e=Ee(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=M({},cn,{view:0,detail:0}),hn=an(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(fn),mn=an(M({},fn,{dataTransfer:0})),gn=an(M({},dn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=an(vn),bn=an(M({},cn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function xn(){return kn}var Tn=M({},dn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Tn),In=an(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),An=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),Pn=[9,13,27,32],jn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!jn||On&&8<On&&11>=On),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function $n(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Yn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Yn=Zn}else Yn=!1;Jn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Wn(t,Gn,e,Ee(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function ar(e,t){if("click"===e)return $n(t)}function sr(e,t){if("input"===e||"change"===e)return $n(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},Sr={},kr={};function xr(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=xr("animationend"),Cr=xr("animationiteration"),Ir=xr("animationstart"),Nr=xr("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var jr=Dr[Pr];Rr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(Ir,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,o,c),a=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,s.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=vi(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}De((function(){var r=a,i=Ee(n),s=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case Cr:case Ir:l=yn;break;case Nr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:bi(l),f=null==c?o:bi(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(s,o,l,u,!1),null!==c&&null!==d&&Qr(s,d,c,u,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Hn(o))if(Jn)g=sr;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var v;if(jn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(v=en()):(Yt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Kr(r,w)).length&&(w=new bn(w,e,null,n,i),s.push({event:w,listeners:y}),v?w.data=v:null!==(v=Bn(n))&&(w.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!jn&&Vn(e,t)?(e=en(),Zt=Yt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Ur(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Re(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Re(n,a))&&s.unshift(Wr(n,l,o)):i||null!=(l=Re(n,a))&&s.push(Wr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Yr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ei(e){return e[fi]||null}var _i=[],Si=-1;function ki(e){return{current:e}}function xi(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function Ti(e,t){Si++,_i[Si]=e.current,e.current=t}var Ci={},Ii=ki(Ci),Ni=ki(!1),Ai=Ci;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){xi(Ni),xi(Ii)}function ji(e,t,n){if(Ii.current!==Ci)throw Error(a(168));Ti(Ii,t),Ti(Ni,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=Ii.current,Ti(Ii,e),Ti(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,xi(Ni),xi(Ii),Ti(Ii,e)):xi(Ni),Ti(Ni,n)}var Ui=null,Fi=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,zi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,$i=null,Xi=1,Ji="";function Yi(e,t){qi[Hi++]=Ki,qi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=$i,$i=e;var r=Xi;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-st(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Yi(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=b.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&va(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);ya(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);ya(t,r)}return null}function m(i,a,o,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(i,d),ia&&Yi(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(a=s(d,a,m),null===u?c=d:u.sibling=d,u=d);return ia&&Yi(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),ia&&Yi(i,m),c}function g(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),o=s(w,o,g),null===d?u=w:d.sibling=w,d=w,m=y}if(v.done)return n(i,m),ia&&Yi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return ia&&Yi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),ia&&Yi(i,g),u}return function e(r,a,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case E:e:{for(var c=s.key,u=a;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(a=i(u,s.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&va(c)===u.type){n(r,u.sibling),(a=i(u,s.props)).ref=ga(r,u,s),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((a=Oc(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=jc(s.type,s.key,s.props,null,r.mode,l)).ref=ga(r,a,s),l.return=r,r=l)}return o(r);case _:e:{for(u=s.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(s,r.mode,l)).return=r,r=a}return o(r);case R:return e(r,a,(u=s._init)(s._payload),l)}if(te(s))return m(r,a,s,l);if(O(s))return g(r,a,s,l);ya(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Mc(s,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var ba=wa(!0),Ea=wa(!1),_a=ki(null),Sa=null,ka=null,xa=null;function Ta(){xa=ka=Sa=null}function Ca(e){var t=_a.current;xi(_a),e._currentValue=t}function Ia(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Na(e,t){Sa=e,xa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Aa(e){var t=e._currentValue;if(xa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===Sa)throw Error(a(308));ka=e,Sa.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Da=null;function Ra(e){null===Da?Da=[e]:Da.push(e)}function Pa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ra(t)):(n.next=i.next,i.next=n),t.interleaved=n,ja(e,r)}function ja(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ja(e,n)}return null===(i=r.interleaved)?(t.next=t,Ra(r)):(t.next=i.next,i.next=t),r.interleaved=t,ja(e,n)}function Va(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ba(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function za(e,t,n,r){var i=e.updateQueue;Oa=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,u=c=l=null,o=a;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Oa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ll|=s,e.lanes=s,e.memoizedState=d}}function qa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ha={},Wa=ki(Ha),Ka=ki(Ha),Ga=ki(Ha);function Qa(e){if(e===Ha)throw Error(a(174));return e}function $a(e,t){switch(Ti(Ga,t),Ti(Ka,e),Ti(Wa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Wa),Ti(Wa,t)}function Xa(){xi(Wa),xi(Ka),xi(Ga)}function Ja(e){Qa(Ga.current);var t=Qa(Wa.current),n=le(t,e.type);t!==n&&(Ti(Ka,e),Ti(Wa,n))}function Ya(e){Ka.current===e&&(xi(Wa),xi(Ka))}var Za=ki(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=b.ReactCurrentDispatcher,is=b.ReactCurrentBatchConfig,as=0,ss=null,os=null,ls=null,cs=!1,us=!1,ds=0,hs=0;function fs(){throw Error(a(321))}function ps(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ms(e,t,n,r,i,s){if(as=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Ys:Zs,e=n(r,i),us){s=0;do{if(us=!1,ds=0,25<=s)throw Error(a(301));s+=1,ls=os=null,t.updateQueue=null,rs.current=eo,e=n(r,i)}while(us)}if(rs.current=Js,t=null!==os&&null!==os.next,as=0,ls=os=ss=null,cs=!1,t)throw Error(a(300));return e}function gs(){var e=0!==ds;return ds=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function vs(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(a(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function ws(e,t){return"function"===typeof t?t(e):t}function bs(e){var t=vs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=os,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((as&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ss.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==s);null===c?o=r:c.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ss.lanes|=s,Ll|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Es(e){var t=vs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(wo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _s(){}function Ss(e,t){var n=ss,r=vs(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,wo=!0),r=r.queue,Os(Ts.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,As(9,xs.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(a(349));0!==(30&as)||ks(n,t,i)}return i}function ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xs(e,t,n,r){t.value=n,t.getSnapshot=r,Cs(t)&&Is(e)}function Ts(e,t,n){return n((function(){Cs(t)&&Is(e)}))}function Cs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Is(e){var t=ja(e,1);null!==t&&nc(t,e,1,-1)}function Ns(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Gs.bind(null,ss,e),[t.memoizedState,e]}function As(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ds(){return vs().memoizedState}function Rs(e,t,n,r){var i=ys();ss.flags|=e,i.memoizedState=As(1|t,n,void 0,void 0===r?null:r)}function Ps(e,t,n,r){var i=vs();r=void 0===r?null:r;var a=void 0;if(null!==os){var s=os.memoizedState;if(a=s.destroy,null!==r&&ps(r,s.deps))return void(i.memoizedState=As(t,n,a,r))}ss.flags|=e,i.memoizedState=As(1|t,n,a,r)}function js(e,t){return Rs(8390656,8,e,t)}function Os(e,t){return Ps(2048,8,e,t)}function Ls(e,t){return Ps(4,2,e,t)}function Ms(e,t){return Ps(4,4,e,t)}function Us(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ps(4,4,Us.bind(null,t,e),n)}function Vs(){}function Bs(e,t){var n=vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ps(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zs(e,t){var n=vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ps(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qs(e,t,n){return 0===(21&as)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ss.lanes|=n,Ll|=n,e.baseState=!0),t)}function Hs(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{wt=n,is.transition=r}}function Ws(){return vs().memoizedState}function Ks(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qs(e))$s(t,n);else if(null!==(n=Pa(e,t,n,r))){nc(n,e,r,ec()),Xs(n,t,r)}}function Gs(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qs(e))$s(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(i.next=i,Ra(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Pa(e,t,i,r))&&(nc(n,e,r,i=ec()),Xs(n,t,r))}}function Qs(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function $s(e,t){us=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Js={readContext:Aa,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Ys={readContext:Aa,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Aa,useEffect:js,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Rs(4194308,4,Us.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Rs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Rs(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ks.bind(null,ss,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:Ns,useDebugValue:Vs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=Ns(!1),t=e[0];return e=Hs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ss,i=ys();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nl)throw Error(a(349));0!==(30&as)||ks(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,js(Ts.bind(null,r,s,e),[e]),r.flags|=2048,As(9,xs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Nl.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-st(Xi)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:Aa,useCallback:Bs,useContext:Aa,useEffect:Os,useImperativeHandle:Fs,useInsertionEffect:Ls,useLayoutEffect:Ms,useMemo:zs,useReducer:bs,useRef:Ds,useState:function(){return bs(ws)},useDebugValue:Vs,useDeferredValue:function(e){return qs(vs(),os.memoizedState,e)},useTransition:function(){return[bs(ws)[0],vs().memoizedState]},useMutableSource:_s,useSyncExternalStore:Ss,useId:Ws,unstable_isNewReconciler:!1},eo={readContext:Aa,useCallback:Bs,useContext:Aa,useEffect:Os,useImperativeHandle:Fs,useInsertionEffect:Ls,useLayoutEffect:Ms,useMemo:zs,useReducer:Es,useRef:Ds,useState:function(){return Es(ws)},useDebugValue:Vs,useDeferredValue:function(e){var t=vs();return null===os?t.memoizedState=e:qs(t,os.memoizedState,e)},useTransition:function(){return[Es(ws)[0],vs().memoizedState]},useMutableSource:_s,useSyncExternalStore:Ss,useId:Ws,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ua(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,i))&&(nc(t,e,i,r),Va(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ua(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,i))&&(nc(t,e,i,r),Va(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ua(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fa(e,i,r))&&(nc(t,e,r,n),Va(t,e,r))}};function io(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function ao(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Aa(a):(i=Ri(t)?Ai:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function so(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Aa(a):(a=Ri(t)?Ai:Ii.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),za(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Ua(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),uo(0,t)},n}function po(e,t,n){(n=Ua(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ua(-1,1)).tag=2,Fa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vo=b.ReactCurrentOwner,wo=!1;function bo(e,t,n,r){t.child=null===e?Ea(t,null,n,r):ba(t,e.child,n,r)}function Eo(e,t,n,r,i){n=n.render;var a=t.ref;return Na(t,i),r=ms(e,t,n,r,a,i),n=gs(),null===e||wo?(ia&&n&&ea(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function _o(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,So(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return To(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Pl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Pl,Rl),Rl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Pl,Rl),Rl|=r;return bo(e,t,i,n),t.child}function xo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,r,i){var a=Ri(n)?Ai:Ii.current;return a=Di(t,a),Na(t,i),n=ms(e,t,n,r,a,i),r=gs(),null===e||wo?(ia&&r&&ea(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Co(e,t,n,r,i){if(Ri(n)){var a=!0;Li(t)}else a=!1;if(Na(t,i),null===t.stateNode)qo(e,t),ao(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Aa(c):c=Di(t,c=Ri(n)?Ai:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&so(t,s,r,c),Oa=!1;var h=t.memoizedState;s.state=h,za(t,r,s,i),l=t.memoizedState,o!==r||h!==l||Ni.current||Oa?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Oa||io(t,n,o,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ma(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Aa(l):l=Di(t,l=Ri(n)?Ai:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&so(t,s,r,l),Oa=!1,h=t.memoizedState,s.state=h,za(t,r,s,i);var p=t.memoizedState;o!==d||h!==p||Ni.current||Oa?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Oa||io(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,a,i)}function Io(e,t,n,r,i,a){xo(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Mi(t,n,!1),Ho(e,t,a);r=t.stateNode,vo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function No(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),$a(e,t.containerInfo)}function Ao(e,t,n,r,i){return fa(),pa(i),t.flags|=256,bo(e,t,n,r),t.child}var Do,Ro,Po,jo,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,i=t.pendingProps,s=Za.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ti(Za,1&s),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Uo(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(s=Oc(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,s);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(s=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Nl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,ja(e,i),nc(r,e,i,-1))}return mc(),Fo(e,t,o,r=co(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=$i,Xi=e.id,Ji=e.overflow,$i=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(o){o=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Pc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Pc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&pa(r),ba(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ia(e.return,t,n)}function Bo(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Za,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bo(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===es(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bo(t,!0,n,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Ko(t),null;case 3:return r=t.stateNode,Xa(),xi(Ni),xi(Ii),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Ro(e,t),Ko(t),null;case 5:Ya(t);var i=Qa(Ga.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ko(t),null}if(e=Qa(Wa.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ie(r,s),Fr("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Do(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=$(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fr("scroll",e):null!=u&&w(e,s,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)jo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Qa(Ga.current),Qa(Wa.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Yr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ko(t),null;case 13:if(xi(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),fa(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hi]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),s=!1}else null!==aa&&(sc(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===jl&&(jl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Xa(),Ro(e,t),null===e&&zr(t.stateNode.containerInfo),Ko(t),null;case 10:return Ca(t.type._context),Ko(t),null;case 19:if(xi(Za),null===(s=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Wo(s,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Wo(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Za,1&Za.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>zl&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ia)return Ko(t),null}else 2*Je()-s.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=Za.current,Ti(Za,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qo(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),xi(Ni),xi(Ii),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ya(t),null;case 13:if(xi(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(Za),null;case 4:return Xa(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Po=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qa(Wa.current);var a,s=null;switch(n){case"input":i=$(e,i),r=$(e,r),s=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var $o=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Yo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Xo||Zo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,hl(e,t,n),Xo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));fl(s,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(i,s),we(l,o);var u=we(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):w(i,d,h,u)}switch(l){case"input":Y(i,s);break;case"textarea":ae(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){kc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){kc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||d,ml(t,e),Xo=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Yo=e,d=e.child;null!==d;){for(h=Yo=d;null!==Yo;){switch(p=(f=Yo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){El(h);continue}}null!==p?(p.return=f,Yo=p):El(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(a(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Yo=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Yo;){var i=Yo,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||$o;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=$o;var c=Xo;if($o=s,(Xo=l)&&!c)for(Yo=i;null!==Yo;)l=(s=Yo).child,22===s.tag&&null!==s.memoizedState?_l(i):null!==l?(l.return=s,Yo=l):_l(i);for(;null!==a;)Yo=a,wl(a,t,n),a=a.sibling;Yo=i,$o=o,Xo=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Yo=a):bl(e)}}function bl(e){for(;null!==Yo;){var t=Yo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qa(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qa(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Xo||512&t.flags&&il(t)}catch(f){kc(t,t.return,f)}}if(t===e){Yo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yo=n;break}Yo=t.return}}function El(e){for(;null!==Yo;){var t=Yo;if(t===e){Yo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yo=n;break}Yo=t.return}}function _l(e){for(;null!==Yo;){var t=Yo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var a=t.return;try{il(t)}catch(l){kc(t,a,l)}break;case 5:var s=t.return;try{il(t)}catch(l){kc(t,s,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Yo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Yo=o;break}Yo=t.return}}var Sl,kl=Math.ceil,xl=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Il=0,Nl=null,Al=null,Dl=0,Rl=0,Pl=ki(0),jl=0,Ol=null,Ll=0,Ml=0,Ul=0,Fl=null,Vl=null,Bl=0,zl=1/0,ql=null,Hl=!1,Wl=null,Kl=null,Gl=!1,Ql=null,$l=0,Xl=0,Jl=null,Yl=-1,Zl=0;function ec(){return 0!==(6&Il)?Je():-1!==Yl?Yl:Yl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Dl?Dl&-Dl:null!==ma.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(a(185));yt(e,n,r),0!==(2&Il)&&e===Nl||(e===Nl&&(0===(2&Il)&&(Ml|=n),4===jl&&oc(e,Dl)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(zl=Je()+500,Fi&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=ft(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Nl?Dl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fi=!0,Bi(e)}(lc.bind(null,e)):Bi(lc.bind(null,e)),si((function(){0===(6&Il)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Yl=-1,Zl=0,0!==(6&Il))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Nl?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Il;Il|=2;var s=pc();for(Nl===e&&Dl===t||(ql=null,zl=Je()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ta(),xl.current=s,Il=i,null!==Al?t=0:(Nl=null,Dl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,Je()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(s=pt(e))&&(r=s,t=ac(e,s))),1===t))throw n=Ol,hc(e,0),oc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Ec(e,Vl,ql);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,Vl,ql),t);break}Ec(e,Vl,ql);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,Vl,ql),r);break}Ec(e,Vl,ql);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&sc(t)),e}function sc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Ul,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Vl,ql),rc(e,Je()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(zl=Je()+500,Fi&&zi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Il)&&_c();var t=Il;Il|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Il=t))&&zi()}}function dc(){Rl=Pl.current,xi(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Xa(),xi(Ni),xi(Ii),ns();break;case 5:Ya(r);break;case 4:Xa();break;case 13:case 19:xi(Za);break;case 10:Ca(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Al=e=Pc(e.current,null),Dl=Rl=t,jl=0,Ol=null,Ul=Ml=Ll=0,Vl=Fl=null,null!==Da){for(t=0;t<Da.length;t++)if(null!==(r=(n=Da[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Da=null}return e}function fc(e,t){for(;;){var n=Al;try{if(Ta(),rs.current=Js,cs){for(var r=ss.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}cs=!1}if(as=0,ls=os=ss=null,us=!1,ds=0,Tl.current=null,null===n||null===n.return){jl=1,Ol=t,Al=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&mo(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(s,u,t),mc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),pa(lo(c,l));break e}}s=c=lo(c,l),4!==jl&&(jl=2),null===Fl?Fl=[s]:Fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,fo(0,c,t));break e;case 1:l=c;var v=s.type,w=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Kl||!Kl.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,po(s,l,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=xl.current;return xl.current=Js,null===e?Js:e}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Nl||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Nl,Dl)}function gc(e,t){var n=Il;Il|=2;var r=pc();for(Nl===e&&Dl===t||(ql=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Ta(),Il=n,xl.current=r,null!==Al)throw Error(a(261));return Nl=null,Dl=0,jl}function yc(){for(;null!==Al;)wc(Al)}function vc(){for(;null!==Al&&!$e();)wc(Al)}function wc(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,Tl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return jl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===jl&&(jl=5)}function Ec(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{_c()}while(null!==Ql);if(0!==(6&Il))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Nl&&(Al=Nl=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Nc(tt,(function(){return _c(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Cl.transition,Cl.transition=null;var o=wt;wt=1;var l=Il;Il|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(E){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Yo=t;null!==Yo;)if(e=(t=Yo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yo=e;else for(;null!==Yo;){t=Yo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(E){kc(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,Yo=e;break}Yo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Xe(),Il=l,wt=o,Cl.transition=s}else e.current=n;if(Gl&&(Gl=!1,Ql=e,$l=i),s=e.pendingLanes,0===s&&(Kl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&$l)&&0!==e.tag&&_c(),s=e.pendingLanes,0!==(1&s)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,zi()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function _c(){if(null!==Ql){var e=bt($l),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,$l=0,0!==(6&Il))throw Error(a(331));var i=Il;for(Il|=4,Yo=e.current;null!==Yo;){var s=Yo,o=s.child;if(0!==(16&Yo.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Yo=u;null!==Yo;){var d=Yo;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Yo=h;else for(;null!==Yo;){var f=(d=Yo).sibling,p=d.return;if(al(d),d===u){Yo=null;break}if(null!==f){f.return=p,Yo=f;break}Yo=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Yo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Yo=o;else e:for(;null!==Yo;){if(0!==(2048&(s=Yo).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Yo=v;break e}Yo=s.return}}var w=e.current;for(Yo=w;null!==Yo;){var b=(o=Yo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Yo=b;else e:for(o=w;null!==Yo;){if(0!==(2048&(l=Yo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){kc(l,l.return,_)}if(l===o){Yo=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,Yo=E;break e}Yo=l.return}}if(Il=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=Fa(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Fa(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Dl&n)===n&&(4===jl||3===jl&&(130023424&Dl)===Dl&&500>Je()-Bl?hc(e,0):Ul|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=ja(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,s){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Oc(n.children,i,s,t);case k:o=8,i|=8;break;case x:return(e=Dc(12,n,t,2|i)).elementType=x,e.lanes=s,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=s,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=s,e;case P:return Lc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case C:o=9;break e;case I:o=11;break e;case D:o=14;break e;case R:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Oc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,s,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Bc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Oi(e,n,t)}return t}function zc(e,t,n,r,i,a,s,o,l){return(e=Vc(n,r,!0,e,0,a,0,o,l)).context=Bc(null),n=e.current,(a=Ua(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Fa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,a=ec(),s=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ua(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fa(i,t,s))&&(nc(e,i,s,a),Va(e,i,s)),s}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:No(t),fa();break;case 5:Ja(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(_a,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Ti(Za,1&Za.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ti(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ho(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Di(t,Ii.current);Na(t,n),i=ms(null,t,r,e,i,n);var s=gs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(s=!0,Li(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,La(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Io(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===D)return 14}return 2}(r),e=to(r,e),i){case 0:t=To(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=Eo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(No(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ma(e,t),za(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ao(e,t,r,n,i=lo(Error(a(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=lo(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ea(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),xo(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Mo(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ti(_a,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!Ni.current){t=Ho(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ua(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ia(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ia(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Na(t,n),r=r(i=Aa(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),_o(e,t,r,i=to(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),qo(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Na(t,n),ao(t,r,i),oo(t,r,i,n),Io(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return ko(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yc(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var e=Hc(s);o.call(e)}}qc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(s);a.call(e)}}var s=zc(t,r,e,0,null,!1,0,"",Yc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Yc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(s)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Il)&&(zl=Je()+500,zi()))}break;case 13:uc((function(){var t=ja(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=ja(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=ja(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},kt=function(){return wt},xt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},_e=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(a(90));G(r),Y(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[wi,bi,Ei,Te,Ce,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,s,o),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var E=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+I(l,0):a,E(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(s,t,i,"",(function(e){return e}))):null!=s&&(T(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",E(e))for(var c=0;c<e.length;c++){var u=a+I(o=e[c],c);l+=N(o,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=N(o=o.value,t,i,u=a+I(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,P(_);else{var t=r(u);null!==t&&j(E,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var a=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&j(E,d.startTime-n),l=!1}return l}finally{h=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,x=null,T=-1,C=5,I=-1;function N(){return!(t.unstable_now()-I<C)}function A(){if(null!==x){var e=t.unstable_now();I=e;var n=!0;try{n=x(!0,e)}finally{n?S():(k=!1,x=null)}}else k=!1}if("function"===typeof w)S=function(){w(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,S=function(){R.postMessage(null)}}else S=function(){y(A,0)};function P(e){x=e,k||(k=!0,S())}function j(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,j(E,a-s))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".d354954e.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="corals:";n.l=(r,i,a,s)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=a);var s=n.p+n.u(t),o=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,a,s=r[0],o=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkcorals=self.webpackChunkcorals||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e,t=n(43),r=n.t(t,2),i=n(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const s="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(t,n,r,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:h=!1}=i,f=l.history,p=e.Pop,m=null,g=y();function y(){return(f.state||{idx:null}).idx}function v(){p=e.Pop;let t=y(),n=null==t?null:t-g;g=t,m&&m({action:p,location:b.location,delta:n})}function w(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(a({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return t(l,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(s,v),m=e,()=>{l.removeEventListener(s,v),m=null}},createHref:e=>n(l,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=u(b.location,t,n);r&&r(i,t),g=y()+1;let a=c(i,g),s=b.createHref(i);try{f.pushState(a,"",s)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(s)}h&&m&&m({action:p,location:b.location,delta:1})},replace:function(t,n){p=e.Replace;let i=u(b.location,t,n);r&&r(i,t),g=y();let a=c(i,g),s=b.createHref(i);f.replaceState(a,"",s),h&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){void 0===n&&(n="/");let r=N(("string"===typeof t?h(t):t).pathname||"/",n);if(null==r)return null;let i=g(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=I(r);a=T(i[s],e)}return a}function g(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(o(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let l=j([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:x(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=y(r.join("/")),o=[];return o.push(...s.map((e=>""===e?a:[a,e].join("/")))),i&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const v=/^:[\w-]+$/,w=3,b=2,E=1,_=10,S=-2,k=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(k)&&(r+=S),t&&(r+=b),n.filter((e=>!k(e))).reduce(((e,t)=>e+(v.test(t)?w:""===t?E:_)),r)}function T(e,t){let{routesMeta:n}=e,r={},i="/",a=[];for(let s=0;s<n.length;++s){let e=n[s],o=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;a.push({params:r,pathname:j([i,c.pathname]),pathnameBase:O(j([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=j([i,c.pathnameBase]))}return a}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:a,pathnameBase:s,pattern:e}}function I(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function R(e,t){let n=D(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function P(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=h(e):(i=a({},e),o(!i.pathname||!i.pathname.includes("?"),A("?","pathname","search",i)),o(!i.pathname||!i.pathname.includes("#"),A("#","pathname","hash",i)),o(!i.search||!i.search.includes("#"),A("#","search","hash",i)));let s,l=""===e||""===i.pathname,c=l?"/":i.pathname;if(null==c)s=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?h(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:L(r),hash:M(i)}}(i,s),d=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!f||(u.pathname+="/"),u}const j=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const F=["post","put","patch","delete"],V=(new Set(F),["get",...F]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const z=t.createContext(null);const q=t.createContext(null);const H=t.createContext(null);const W=t.createContext(null);const K=t.createContext({outlet:null,matches:[],isDataRoute:!1});const G=t.createContext(null);function Q(){return null!=t.useContext(W)}function $(){return Q()||o(!1),t.useContext(W).location}function X(e){t.useContext(H).static||t.useLayoutEffect(e)}function J(){let{isDataRoute:e}=t.useContext(K);return e?function(){let{router:e}=se(ie.UseNavigateStable),n=le(ae.UseNavigateStable),r=t.useRef(!1);X((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,B({fromRouteId:n},i)))}),[e,n]);return i}():function(){Q()||o(!1);let e=t.useContext(z),{basename:n,future:r,navigator:i}=t.useContext(H),{matches:a}=t.useContext(K),{pathname:s}=$(),l=JSON.stringify(R(a,r.v7_relativeSplatPath)),c=t.useRef(!1);return X((()=>{c.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let a=P(t,JSON.parse(l),s,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:j([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}),[n,i,l,s,e])}()}function Y(n,r,i,a){Q()||o(!1);let{navigator:s}=t.useContext(H),{matches:l}=t.useContext(K),c=l[l.length-1],u=c?c.params:{},d=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,p=$();if(r){var g;let e="string"===typeof r?h(r):r;"/"===d||(null==(g=e.pathname)?void 0:g.startsWith(d))||o(!1),f=e}else f=p;let y=f.pathname||"/",v=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=m(n,{pathname:v});let b=re(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:j([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:j([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,i,a);return r&&b?t.createElement(W.Provider,{value:{location:B({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},b):b}function Z(){let e=function(){var e;let n=t.useContext(G),r=oe(ae.UseRouteError),i=le(ae.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}const ee=t.createElement(Z,null);class te extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(K.Provider,{value:this.props.routeContext},t.createElement(G.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ne(e){let{routeContext:n,match:r,children:i}=e,a=t.useContext(z);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(K.Provider,{value:n},i)}function re(e,n,r,i){var a;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var s;if(null==(s=r)||!s.errors)return null;e=r.matches}let l=e,c=null==(a=r)?void 0:a.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||o(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight(((e,i,a)=>{let s,o=!1,h=null,f=null;var p;r&&(s=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||ee,u&&(d<0&&0===a?(p="route-fallback",!1||ce[p]||(ce[p]=!0),o=!0,f=null):d===a&&(o=!0,f=i.route.hydrateFallbackElement||null)));let m=n.concat(l.slice(0,a+1)),g=()=>{let n;return n=s?h:o?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(ne,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(te,{location:r.location,revalidation:r.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ie=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ie||{}),ae=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ae||{});function se(e){let n=t.useContext(z);return n||o(!1),n}function oe(e){let n=t.useContext(q);return n||o(!1),n}function le(e){let n=function(e){let n=t.useContext(K);return n||o(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||o(!1),r.route.id}const ce={};r.startTransition;function ue(e){let{to:n,replace:r,state:i,relative:a}=e;Q()||o(!1);let{future:s,static:l}=t.useContext(H),{matches:c}=t.useContext(K),{pathname:u}=$(),d=J(),h=P(n,R(c,s.v7_relativeSplatPath),u,"path"===a),f=JSON.stringify(h);return t.useEffect((()=>d(JSON.parse(f),{replace:r,state:i,relative:a})),[d,f,a,r,i]),null}function de(e){o(!1)}function he(n){let{basename:r="/",children:i=null,location:a,navigationType:s=e.Pop,navigator:l,static:c=!1,future:u}=n;Q()&&o(!1);let d=r.replace(/^\/*/,"/"),f=t.useMemo((()=>({basename:d,navigator:l,static:c,future:B({v7_relativeSplatPath:!1},u)})),[d,u,l,c]);"string"===typeof a&&(a=h(a));let{pathname:p="/",search:m="",hash:g="",state:y=null,key:v="default"}=a,w=t.useMemo((()=>{let e=N(p,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:s}}),[d,p,m,g,y,v,s]);return null==w?null:t.createElement(H.Provider,{value:f},t.createElement(W.Provider,{children:i,value:w}))}function fe(e){let{children:t,location:n}=e;return Y(pe(t),n)}new Promise((()=>{}));t.Component;function pe(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let a=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,pe(e.props.children,a));e.type!==de&&o(!1),e.props.index&&e.props.children&&o(!1);let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=pe(e.props.children,a)),r.push(s)})),r}const me=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,s=a?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(me(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==o)throw new ye;const l=t<<2|a>>4;if(r.push(l),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==o){const e=s<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ve=function(e){return function(e){const t=me(e);return ge.encodeByteArray(t,!0)}(e).replace(/\./g,"")},we=function(e){try{return ge.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const be=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ee=()=>{try{return be()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&we(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},_e=e=>{var t,n;return null===(n=null===(t=Ee())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Se=e=>{const t=_e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ke=()=>{var e;return null===(e=Ee())||void 0===e?void 0:e.config},xe=e=>{var t;return null===(t=Ee())||void 0===t?void 0:t["_".concat(e)]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ce(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(a)),""].join(".")}function Ie(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ne(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ae(){return!function(){var e;const t=null===(e=Ee())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function De(){try{return"object"===typeof indexedDB}catch(e){return!1}}function Re(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class Pe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Oe,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Pe(n,a,t)}}const Oe=/\{\$([^}]+)}/g;function Le(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],a=t[i];if(Me(n)&&Me(a)){if(!Le(n,a))return!1}else if(n!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Me(e){return null!==e&&"object"===typeof e}function Ue(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Fe(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Ve(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Be{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ze),void 0===r.error&&(r.error=ze),void 0===r.complete&&(r.complete=ze);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ze(){}const qe=1e3,He=2,We=144e5,Ke=.5;function Ge(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe)*Math.pow(t,e),r=Math.round(Ke*n*(Math.random()-.5)*2);return Math.min(We,n+r)}function Qe(e){return e&&e._delegate?e._delegate:e}class $e{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xe="[DEFAULT]";class Je{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Te;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xe})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Xe?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return this.component?this.component.multipleInstances?e:Xe:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ye{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Je(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ze=[];var et;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(et||(et={}));const tt={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},nt=et.INFO,rt={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},it=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=rt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class at{constructor(e){this.name=e,this._logLevel=nt,this._logHandler=it,this._userLogHandler=null,Ze.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?tt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...t),this._logHandler(this,et.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...t),this._logHandler(this,et.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,et.INFO,...t),this._logHandler(this,et.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,et.WARN,...t),this._logHandler(this,et.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,et.ERROR,...t),this._logHandler(this,et.ERROR,...t)}}const st=(e,t)=>t.some((t=>e instanceof t));let ot,lt;const ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,ft=new WeakMap;let pt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ut.get(e);if("objectStoreNames"===t)return e.objectStoreNames||dt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function mt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(lt||(lt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(vt(this),n),yt(ct.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yt(e.apply(vt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=e.call(vt(this),t,...r);return dt.set(a,t.sort?t.sort():[t]),yt(a)}}function gt(e){return"function"===typeof e?mt(e):(e instanceof IDBTransaction&&function(e){if(ut.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ut.set(e,t)}(e),st(e,ot||(ot=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,pt):e)}function yt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(yt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&ct.set(t,e)})).catch((()=>{})),ft.set(t,e),t}(e);if(ht.has(e))return ht.get(e);const t=gt(e);return t!==e&&(ht.set(e,t),ft.set(t,e)),t}const vt=e=>ft.get(e);function wt(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),o=yt(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(yt(s.result),e.oldVersion,e.newVersion,yt(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}const bt=["get","getKey","getAll","getAllKeys","count"],Et=["put","add","delete","clear"],_t=new Map;function St(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(_t.get(t))return _t.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Et.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!bt.includes(n))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),i&&t.done]))[0]};return _t.set(t,a),a}pt=(e=>({...e,get:(t,n,r)=>St(t,n)||e.get(t,n,r),has:(t,n)=>!!St(t,n)||e.has(t,n)}))(pt);class kt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const xt="@firebase/app",Tt="0.10.2",Ct=new at("@firebase/app"),It="@firebase/app-compat",Nt="@firebase/analytics-compat",At="@firebase/analytics",Dt="@firebase/app-check-compat",Rt="@firebase/app-check",Pt="@firebase/auth",jt="@firebase/auth-compat",Ot="@firebase/database",Lt="@firebase/database-compat",Mt="@firebase/functions",Ut="@firebase/functions-compat",Ft="@firebase/installations",Vt="@firebase/installations-compat",Bt="@firebase/messaging",zt="@firebase/messaging-compat",qt="@firebase/performance",Ht="@firebase/performance-compat",Wt="@firebase/remote-config",Kt="@firebase/remote-config-compat",Gt="@firebase/storage",Qt="@firebase/storage-compat",$t="@firebase/firestore",Xt="@firebase/firestore-compat",Jt="firebase",Yt="[DEFAULT]",Zt={[xt]:"fire-core",[It]:"fire-core-compat",[At]:"fire-analytics",[Nt]:"fire-analytics-compat",[Rt]:"fire-app-check",[Dt]:"fire-app-check-compat",[Pt]:"fire-auth",[jt]:"fire-auth-compat",[Ot]:"fire-rtdb",[Lt]:"fire-rtdb-compat",[Mt]:"fire-fn",[Ut]:"fire-fn-compat",[Ft]:"fire-iid",[Vt]:"fire-iid-compat",[Bt]:"fire-fcm",[zt]:"fire-fcm-compat",[qt]:"fire-perf",[Ht]:"fire-perf-compat",[Wt]:"fire-rc",[Kt]:"fire-rc-compat",[Gt]:"fire-gcs",[Qt]:"fire-gcs-compat",[$t]:"fire-fst",[Xt]:"fire-fst-compat","fire-js":"fire-js",[Jt]:"fire-js-all"},en=new Map,tn=new Map,nn=new Map;function rn(e,t){try{e.container.addComponent(t)}catch(n){Ct.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function an(e){const t=e.name;if(nn.has(t))return Ct.debug("There were multiple attempts to register component ".concat(t,".")),!1;nn.set(t,e);for(const n of en.values())rn(n,e);for(const n of tn.values())rn(n,e);return!0}function sn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function on(e){return void 0!==e.settings}const ln=new je("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class cn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $e("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}const un="10.11.1";function dn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Yt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ln.create("bad-app-name",{appName:String(i)});if(n||(n=ke()),!n)throw ln.create("no-options");const a=en.get(i);if(a){if(Le(n,a.options)&&Le(r,a.config))return a;throw ln.create("duplicate-app",{appName:i})}const s=new Ye(i);for(const l of nn.values())s.addComponent(l);const o=new cn(n,r,s);return en.set(i,o),o}function hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;const t=en.get(e);if(!t&&e===Yt&&ke())return dn();if(!t)throw ln.create("no-app",{appName:e});return t}function fn(e,t,n){var r;let i=null!==(r=Zt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ct.warn(e.join(" "))}an(new $e("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const pn="firebase-heartbeat-database",mn=1,gn="firebase-heartbeat-store";let yn=null;function vn(){return yn||(yn=wt(pn,mn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(gn)}catch(n){console.warn(n)}}}).catch((e=>{throw ln.create("idb-open",{originalErrorMessage:e.message})}))),yn}async function wn(e,t){try{const n=(await vn()).transaction(gn,"readwrite"),r=n.objectStore(gn);await r.put(t,bn(e)),await n.done}catch(n){if(n instanceof Pe)Ct.warn(n.message);else{const e=ln.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ct.warn(e.message)}}}function bn(e){return"".concat(e.name,"!").concat(e.options.appId)}class En{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Sn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_n();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=_n(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),kn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ve(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function _n(){return(new Date).toISOString().substring(0,10)}class Sn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!De()&&Re().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await vn()).transaction(gn),n=await t.objectStore(gn).get(bn(e));return await t.done,n}catch(t){if(t instanceof Pe)Ct.warn(t.message);else{const e=ln.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ct.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function kn(e){return ve(JSON.stringify({version:2,heartbeats:e})).length}var xn;xn="",an(new $e("platform-logger",(e=>new kt(e)),"PRIVATE")),an(new $e("heartbeat",(e=>new En(e)),"PRIVATE")),fn(xt,Tt,xn),fn(xt,Tt,"esm2017"),fn("fire-js","");var Tn,Cn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},In={},Nn=Nn||{},An=Cn||self;function Dn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Rn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Pn="closure_uid_"+(1e9*Math.random()>>>0),jn=0;function On(e,t,n){return e.call.apply(e.bind,arguments)}function Ln(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Mn(e,t,n){return(Mn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?On:Ln).apply(null,arguments)}function Un(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Fn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Vn(){this.s=this.s,this.o=this.o}Vn.prototype.s=!1,Vn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Pn)&&e[Pn]||(e[Pn]=++jn))},Vn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Bn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function zn(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function qn(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Dn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Hn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Hn.prototype.h=function(){this.defaultPrevented=!0};var Wn=function(){if(!An.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};An.addEventListener("test",e,t),An.removeEventListener("test",e,t)}catch(n){}return e}();function Kn(e){return/^[\s\xa0]*$/.test(e)}function Gn(){var e=An.navigator;return e&&(e=e.userAgent)?e:""}function Qn(e){return-1!=Gn().indexOf(e)}function $n(e){return $n[" "](e),e}$n[" "]=function(){};var Xn,Jn,Yn=Qn("Opera"),Zn=Qn("Trident")||Qn("MSIE"),er=Qn("Edge"),tr=er||Zn,nr=Qn("Gecko")&&!(-1!=Gn().toLowerCase().indexOf("webkit")&&!Qn("Edge"))&&!(Qn("Trident")||Qn("MSIE"))&&!Qn("Edge"),rr=-1!=Gn().toLowerCase().indexOf("webkit")&&!Qn("Edge");function ir(){var e=An.document;return e?e.documentMode:void 0}e:{var ar="",sr=function(){var e=Gn();return nr?/rv:([^\);]+)(\)|;)/.exec(e):er?/Edge\/([\d\.]+)/.exec(e):Zn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):rr?/WebKit\/(\S+)/.exec(e):Yn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(sr&&(ar=sr?sr[1]:""),Zn){var or=ir();if(null!=or&&or>parseFloat(ar)){Xn=String(or);break e}}Xn=ar}if(An.document&&Zn){var lr=ir();Jn=lr||(parseInt(Xn,10)||void 0)}else Jn=void 0;var cr=Jn;function ur(e,t){if(Hn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(nr){e:{try{$n(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:dr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ur.$.h.call(this)}}Fn(ur,Hn);var dr={2:"touch",3:"pen",4:"mouse"};ur.prototype.h=function(){ur.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var hr="closure_listenable_"+(1e6*Math.random()|0),fr=0;function pr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++fr,this.fa=this.ia=!1}function mr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function gr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function yr(e){const t={};for(const n in e)t[n]=e[n];return t}const vr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<vr.length;t++)n=vr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function br(e){this.src=e,this.g={},this.h=0}function Er(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Bn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(mr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function _r(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}br.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var s=_r(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new pr(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Sr="closure_lm_"+(1e6*Math.random()|0),kr={};function xr(e,t,n,r,i){if(r&&r.once)return Cr(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)xr(e,t[a],n,r,i);return null}return n=jr(n),e&&e[hr]?e.O(t,n,Rn(r)?!!r.capture:!!r,i):Tr(e,t,n,!1,r,i)}function Tr(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var s=Rn(i)?!!i.capture:!!i,o=Rr(e);if(o||(e[Sr]=o=new br(e)),(n=o.add(t,n,r,s,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Dr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Wn||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ar(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Cr(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Cr(e,t[a],n,r,i);return null}return n=jr(n),e&&e[hr]?e.P(t,n,Rn(r)?!!r.capture:!!r,i):Tr(e,t,n,!0,r,i)}function Ir(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ir(e,t[a],n,r,i);else r=Rn(r)?!!r.capture:!!r,n=jr(n),e&&e[hr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=_r(a=e.g[t],n,r,i))&&(mr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Rr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=_r(t,n,r,i)),(n=-1<e?t[e]:null)&&Nr(n))}function Nr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[hr])Er(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ar(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Rr(t))?(Er(n,e),0==n.h&&(n.src=null,t[Sr]=null)):mr(e)}}}function Ar(e){return e in kr?kr[e]:kr[e]="on"+e}function Dr(e,t){if(e.fa)e=!0;else{t=new ur(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Nr(e),e=n.call(r,t)}return e}function Rr(e){return(e=e[Sr])instanceof br?e:null}var Pr="__closure_events_fn_"+(1e9*Math.random()>>>0);function jr(e){return"function"===typeof e?e:(e[Pr]||(e[Pr]=function(t){return e.handleEvent(t)}),e[Pr])}function Or(){Vn.call(this),this.i=new br(this),this.S=this,this.J=null}function Lr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Hn(t,e);else if(t instanceof Hn)t.target=t.target||e;else{var i=t;wr(t=new Hn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var s=t.g=n[a];i=Mr(s,r,!0,t)&&i}if(i=Mr(s=t.g=e,r,!0,t)&&i,i=Mr(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Mr(s=t.g=n[a],r,!1,t)&&i}function Mr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var s=t[a];if(s&&!s.fa&&s.capture==n){var o=s.listener,l=s.la||s.src;s.ia&&Er(e.i,s),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}Fn(Or,Vn),Or.prototype[hr]=!0,Or.prototype.removeEventListener=function(e,t,n,r){Ir(this,e,t,n,r)},Or.prototype.N=function(){if(Or.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)mr(n[r]);delete t.g[e],t.h--}}this.J=null},Or.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Or.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ur=An.JSON.stringify;function Fr(){var e=Kr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Vr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Br),(e=>e.reset()));class Br{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function zr(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function qr(e){An.setTimeout((()=>{throw e}),0)}let Hr,Wr=!1,Kr=new class{constructor(){this.h=this.g=null}add(e,t){const n=Vr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Gr=()=>{const e=An.Promise.resolve(void 0);Hr=()=>{e.then(Qr)}};var Qr=()=>{for(var e;e=Fr();){try{e.h.call(e.g)}catch(n){qr(n)}var t=Vr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Wr=!1};function $r(e,t){Or.call(this),this.h=e||1,this.g=t||An,this.j=Mn(this.qb,this),this.l=Date.now()}function Xr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Jr(e,t,n){if("function"===typeof e)n&&(e=Mn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Mn(e.handleEvent,e)}return 2147483647<Number(t)?-1:An.setTimeout(e,t||0)}function Yr(e){e.g=Jr((()=>{e.g=null,e.i&&(e.i=!1,Yr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Fn($r,Or),(Tn=$r.prototype).ga=!1,Tn.T=null,Tn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Lr(this,"tick"),this.ga&&(Xr(this),this.start()))}},Tn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tn.N=function(){$r.$.N.call(this),Xr(this),delete this.g};class Zr extends Vn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yr(this)}N(){super.N(),this.g&&(An.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ei(e){Vn.call(this),this.h=e,this.g={}}Fn(ei,Vn);var ti=[];function ni(e,t,n,r){Array.isArray(n)||(n&&(ti[0]=n.toString()),n=ti);for(var i=0;i<n.length;i++){var a=xr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ri(e){gr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Nr(e)}),e),e.g={}}function ii(){this.g=!0}function ai(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var s=1;s<i.length;s++)i[s]=""}}}return Ur(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}ei.prototype.N=function(){ei.$.N.call(this),ri(this)},ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ii.prototype.Ea=function(){this.g=!1},ii.prototype.info=function(){};var si={},oi=null;function li(){return oi=oi||new Or}function ci(e){Hn.call(this,si.Ta,e)}function ui(e){const t=li();Lr(t,new ci(t))}function di(e,t){Hn.call(this,si.STAT_EVENT,e),this.stat=t}function hi(e){const t=li();Lr(t,new di(t,e))}function fi(e,t){Hn.call(this,si.Ua,e),this.size=t}function pi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return An.setTimeout((function(){e()}),t)}si.Ta="serverreachability",Fn(ci,Hn),si.STAT_EVENT="statevent",Fn(di,Hn),si.Ua="timingevent",Fn(fi,Hn);var mi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function yi(){}function vi(e){return e.h||(e.h=e.i())}function wi(){}yi.prototype.h=null;var bi,Ei={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _i(){Hn.call(this,"d")}function Si(){Hn.call(this,"c")}function ki(){}function xi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ei(this),this.P=Ci,e=tr?125:void 0,this.V=new $r(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ti}function Ti(){this.i=null,this.g="",this.h=!1}Fn(_i,Hn),Fn(Si,Hn),Fn(ki,yi),ki.prototype.g=function(){return new XMLHttpRequest},ki.prototype.i=function(){return{}},bi=new ki;var Ci=45e3,Ii={},Ni={};function Ai(e,t,n){e.L=1,e.A=$i(Hi(t)),e.u=n,e.S=!0,Di(e,null)}function Di(e,t){e.G=Date.now(),Oi(e),e.B=Hi(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),la(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Ti,e.g=cs(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Zr(Mn(e.Pa,e,e.g),e.O)),ni(e.U,e.g,"readystatechange",e.nb),t=e.I?yr(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ui(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var s="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Ri(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Pi(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=ji(e,n),r==Ni){4==t&&(e.s=4,hi(14),i=!1),ai(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ii){e.s=4,hi(15),ai(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ai(e.j,e.m,r,null),Vi(e,r)}Ri(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,hi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ts(t),t.M=!0,hi(11))):(ai(e.j,e.m,n,"[Invalid Chunked Response]"),Fi(e),Ui(e))}function ji(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Ni:(n=Number(t.substring(n,r)),isNaN(n)?Ii:(r+=1)+n>t.length?Ni:(t=t.slice(r,r+n),e.o=r+n,t))}function Oi(e){e.Y=Date.now()+e.P,Li(e,e.P)}function Li(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=pi(Mn(e.lb,e),t)}function Mi(e){e.C&&(An.clearTimeout(e.C),e.C=null)}function Ui(e){0==e.l.H||e.J||is(e.l,e)}function Fi(e){Mi(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Xr(e.V),ri(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Vi(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ma(n.i,e)))if(!e.K&&ma(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;rs(n),Ga(n)}es(n),hi(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=pi(Mn(n.ib,n),6e3));if(1>=pa(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else ss(n,11)}else if((e.K||n.g==e)&&rs(n),!Kn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.i;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(ga(a,a.h),a.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Qi(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=ls(r,r.J?r.pa:null,r.Y),s.K){ya(r.i,s);var o=s,l=r.L;l&&o.setTimeout(l),o.C&&(Mi(o),Oi(o)),r.g=s}else Za(r);0<n.j.length&&$a(n)}else"stop"!=c[0]&&"close"!=c[0]||ss(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ss(n,7):Ka(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}ui()}catch(c){}}function Bi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Dn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Dn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Dn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Tn=xi.prototype).setTimeout=function(e){this.P=e},Tn.nb=function(e){e=e.target;const t=this.M;t&&3==Va(e)?t.l():this.Pa(e)},Tn.Pa=function(e){try{if(e==this.g)e:{const u=Va(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||tr||this.g&&(this.h.h||this.g.ja()||Ba(this.g)))){this.J||4!=u||7==t||ui(),Mi(this);var n=this.g.da();this.ca=n;t:if(Ri(this)){var r=Ba(this.g);e="";var i=r.length,a=4==Va(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Fi(this),Ui(this);var s="";break t}this.h.i=new An.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:a&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,a,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+s}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kn(o)){var c=o;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,hi(12),Fi(this),Ui(this);break e}ai(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vi(this,n)}this.S?(Pi(this,u,s),tr&&this.i&&3==u&&(ni(this.U,this.V,"tick",this.mb),this.V.start())):(ai(this.j,this.m,s,null),Vi(this,s)),4==u&&Fi(this),this.i&&!this.J&&(4==u?is(this.l,this):(this.i=!1,Oi(this)))}else(function(e){const t={};e=(e.g&&2<=Va(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Kn(e[r]))continue;var n=zr(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[i]||[];t[i]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,hi(12)):(this.s=0,hi(13)),Fi(this),Ui(this)}}}catch(u){}},Tn.mb=function(){if(this.g){var e=Va(this.g),t=this.g.ja();this.o<t.length&&(Mi(this),Pi(this,e,t),this.i&&4!=e&&Oi(this))}},Tn.cancel=function(){this.J=!0,Fi(this)},Tn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(ui(),hi(17)),Fi(this),this.s=2,Ui(this)):Li(this,this.Y-e)};var zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof qi){this.h=e.h,Wi(this,e.j),this.s=e.s,this.g=e.g,Ki(this,e.m),this.l=e.l;var t=e.i,n=new ia;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Gi(this,n),this.o=e.o}else e&&(t=String(e).match(zi))?(this.h=!1,Wi(this,t[1]||"",!0),this.s=Xi(t[2]||""),this.g=Xi(t[3]||"",!0),Ki(this,t[4]),this.l=Xi(t[5]||"",!0),Gi(this,t[6]||"",!0),this.o=Xi(t[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}function Hi(e){return new qi(e)}function Wi(e,t,n){e.j=n?Xi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ki(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Gi(e,t,n){t instanceof ia?(e.i=t,function(e,t){t&&!e.j&&(aa(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(sa(this,t),la(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ji(t,na)),e.i=new ia(t,e.h))}function Qi(e,t,n){e.i.set(t,n)}function $i(e){return Qi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Xi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ji(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Yi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}qi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ji(t,Zi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ji(t,Zi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ji(n,"/"==n.charAt(0)?ta:ea,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ji(n,ra)),e.join("")};var Zi=/[#\/\?@]/g,ea=/[#\?:]/g,ta=/[#\?]/g,na=/[#\?@]/g,ra=/#/g;function ia(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function aa(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function sa(e,t){aa(e),t=ca(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function oa(e,t){return aa(e),t=ca(e,t),e.g.has(t)}function la(e,t,n){sa(e,t),0<n.length&&(e.i=null,e.g.set(ca(e,t),zn(n)),e.h+=n.length)}function ca(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Tn=ia.prototype).add=function(e,t){aa(this),this.i=null,e=ca(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Tn.forEach=function(e,t){aa(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Tn.ta=function(){aa(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Tn.Z=function(e){aa(this);let t=[];if("string"===typeof e)oa(this,e)&&(t=t.concat(this.g.get(ca(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Tn.set=function(e,t){return aa(this),this.i=null,oa(this,e=ca(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Tn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Tn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=a;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var ua=class{constructor(e,t){this.g=e,this.map=t}};function da(e){this.l=e||ha,An.PerformanceNavigationTiming?e=0<(e=An.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(An.g&&An.g.Ka&&An.g.Ka()&&An.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ha=10;function fa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function pa(e){return e.h?1:e.g?e.g.size:0}function ma(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ga(e,t){e.g?e.g.add(t):e.h=t}function ya(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function va(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return zn(e.i)}da.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var wa,ba=class{stringify(e){return An.JSON.stringify(e,void 0)}parse(e){return An.JSON.parse(e,void 0)}};function Ea(){this.g=new ba}function _a(e,t,n){const r=n||"";try{Bi(e,(function(e,n){let i=e;Rn(e)&&(i=Ur(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sa(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ka(e){this.l=e.ec||null,this.j=e.ob||!1}function xa(e,t){Or.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ta,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fn(ka,yi),ka.prototype.g=function(){return new xa(this.l,this.j)},ka.prototype.i=(wa={},function(){return wa}),Fn(xa,Or);var Ta=0;function Ca(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Ia(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Na(e)}function Na(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Tn=xa.prototype).open=function(e,t){if(this.readyState!=Ta)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Na(this)},Tn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||An).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Tn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ia(this)),this.readyState=Ta},Tn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof An.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ca(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Tn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ia(this):Na(this),3==this.readyState&&Ca(this)}},Tn.Za=function(e){this.g&&(this.response=this.responseText=e,Ia(this))},Tn.Ya=function(e){this.g&&(this.response=e,Ia(this))},Tn.ka=function(){this.g&&Ia(this)},Tn.setRequestHeader=function(e,t){this.v.append(e,t)},Tn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Tn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(xa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Aa=An.JSON.parse;function Da(e){Or.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ra,this.L=this.M=!1}Fn(Da,Or);var Ra="",Pa=/^https?$/i,ja=["POST","PUT"];function Oa(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,La(e),Ua(e)}function La(e){e.F||(e.F=!0,Lr(e,"complete"),Lr(e,"error"))}function Ma(e){if(e.h&&"undefined"!=typeof Nn&&(!e.C[1]||4!=Va(e)||2!=e.da()))if(e.v&&4==Va(e))Jr(e.La,0,e);else if(Lr(e,"readystatechange"),4==Va(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(zi)[1]||null;!i&&An.self&&An.self.location&&(i=An.self.location.protocol.slice(0,-1)),r=!Pa.test(i?i.toLowerCase():"")}n=r}if(n)Lr(e,"complete"),Lr(e,"success");else{e.m=6;try{var a=2<Va(e)?e.g.statusText:""}catch(s){a=""}e.j=a+" ["+e.da()+"]",La(e)}}finally{Ua(e)}}}function Ua(e,t){if(e.g){Fa(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Lr(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Fa(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(An.clearTimeout(e.A),e.A=null)}function Va(e){return e.g?e.g.readyState:0}function Ba(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ra:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Qs){return null}}function za(e){let t="";return gr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function qa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=za(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Qi(e,t,n))}function Ha(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wa(e){this.Ga=0,this.j=[],this.l=new ii,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ha("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ha("baseRetryDelayMs",5e3,e),this.hb=Ha("retryDelaySeedMs",1e4,e),this.eb=Ha("forwardChannelMaxRetries",2,e),this.xa=Ha("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new da(e&&e.concurrentRequestLimit),this.Ja=new Ea,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ka(e){if(Qa(e),3==e.H){var t=e.W++,n=Hi(e.I);if(Qi(n,"SID",e.K),Qi(n,"RID",t),Qi(n,"TYPE","terminate"),Ja(e,n),(t=new xi(e,e.l,t)).L=2,t.A=$i(Hi(n)),n=!1,An.navigator&&An.navigator.sendBeacon)try{n=An.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&An.Image&&((new Image).src=t.A,n=!0),n||(t.g=cs(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Oi(t)}os(e)}function Ga(e){e.g&&(ts(e),e.g.cancel(),e.g=null)}function Qa(e){Ga(e),e.u&&(An.clearTimeout(e.u),e.u=null),rs(e),e.i.cancel(),e.m&&("number"===typeof e.m&&An.clearTimeout(e.m),e.m=null)}function $a(e){if(!fa(e.i)&&!e.m){e.m=!0;var t=e.Na;Hr||Gr(),Wr||(Hr(),Wr=!0),Kr.add(t,e),e.C=0}}function Xa(e,t){var n;n=t?t.m:e.W++;const r=Hi(e.I);Qi(r,"SID",e.K),Qi(r,"RID",n),Qi(r,"AID",e.V),Ja(e,r),e.o&&e.s&&qa(r,e.o,e.s),n=new xi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ya(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ga(e.i,n),Ai(n,r,t)}function Ja(e,t){e.na&&gr(e.na,(function(e,n){Qi(t,n,e)})),e.h&&Bi({},(function(e,n){Qi(t,n,e)}))}function Ya(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Mn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{_a(l,e,"req"+n+"_")}catch(a){r&&r(l)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Za(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Hr||Gr(),Wr||(Hr(),Wr=!0),Kr.add(t,e),e.A=0}}function es(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=pi(Mn(e.Ma,e),as(e,e.A)),e.A++,!0)}function ts(e){null!=e.B&&(An.clearTimeout(e.B),e.B=null)}function ns(e){e.g=new xi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Hi(e.wa);Qi(t,"RID","rpc"),Qi(t,"SID",e.K),Qi(t,"AID",e.V),Qi(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Qi(t,"TO",e.qa),Qi(t,"TYPE","xmlhttp"),Ja(e,t),e.o&&e.s&&qa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=$i(Hi(t)),n.u=null,n.S=!0,Di(n,e)}function rs(e){null!=e.v&&(An.clearTimeout(e.v),e.v=null)}function is(e,t){var n=null;if(e.g==t){rs(e),ts(e),e.g=null;var r=2}else{if(!ma(e.i,t))return;n=t.F,ya(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Lr(r=li(),new fi(r,n)),$a(e)}else Za(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(pa(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=pi(Mn(e.Na,e,t),as(e,e.C)),e.C++,!0))}(e,t)||2==r&&es(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ss(e,5);break;case 4:ss(e,10);break;case 3:ss(e,6);break;default:ss(e,2)}}function as(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ss(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Mn(e.pb,e);n||(n=new qi("//www.google.com/images/cleardot.gif"),An.location&&"http"==An.location.protocol||Wi(n,"https"),$i(n)),function(e,t){const n=new ii;if(An.Image){const r=new Image;r.onload=Un(Sa,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Un(Sa,n,r,"TestLoadImage: error",!1,t),r.onabort=Un(Sa,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Un(Sa,n,r,"TestLoadImage: timeout",!1,t),An.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else hi(2);e.H=0,e.h&&e.h.za(t),os(e),Qa(e)}function os(e){if(e.H=0,e.ma=[],e.h){const t=va(e.i);0==t.length&&0==e.j.length||(qn(e.ma,t),qn(e.ma,e.j),e.i.i.length=0,zn(e.j),e.j.length=0),e.h.ya()}}function ls(e,t,n){var r=n instanceof qi?Hi(n):new qi(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ki(r,r.m);else{var i=An.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new qi(null);r&&Wi(a,r),t&&(a.g=t),i&&Ki(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Qi(r,n,t),Qi(r,"VER",e.ra),Ja(e,r),r}function cs(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Da(new ka({ob:n})):new Da(e.va)).Oa(e.J),t}function us(){}function ds(){if(Zn&&!(10<=Number(cr)))throw Error("Environmental error: no available transport.")}function hs(e,t){Or.call(this),this.g=new Wa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Kn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kn(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ms(this)}function fs(e){_i.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ps(){Si.call(this),this.status=1}function ms(e){this.g=e}function gs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ys(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],s=t+(a^n&(i^a))+r[0]+3614090360&4294967295;s=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(s<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((a=(t=n+((s=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=a+((s=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function vs(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Tn=Da.prototype).Oa=function(e){this.M=e},Tn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():bi.g(),this.C=this.u?vi(this.u):vi(bi),this.g.onreadystatechange=Mn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(a){return void Oa(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=An.FormData&&e instanceof An.FormData,!(0<=Bn(ja,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Fa(this),0<this.B&&((this.L=function(e){return Zn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mn(this.ua,this)):this.A=Jr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Oa(this,a)}},Tn.ua=function(){"undefined"!=typeof Nn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lr(this,"timeout"),this.abort(8))},Tn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Lr(this,"complete"),Lr(this,"abort"),Ua(this))},Tn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ua(this,!0)),Da.$.N.call(this)},Tn.La=function(){this.s||(this.G||this.v||this.l?Ma(this):this.kb())},Tn.kb=function(){Ma(this)},Tn.isActive=function(){return!!this.g},Tn.da=function(){try{return 2<Va(this)?this.g.status:-1}catch(wa){return-1}},Tn.ja=function(){try{return this.g?this.g.responseText:""}catch(wa){return""}},Tn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Aa(t)}},Tn.Ia=function(){return this.m},Tn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Tn=Wa.prototype).ra=8,Tn.H=1,Tn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new xi(this,this.l,e);let a=this.s;if(this.U&&(a?(a=yr(a),wr(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ya(this,i,t),Qi(n=Hi(this.I),"RID",e),Qi(n,"CVER",22),this.F&&Qi(n,"X-HTTP-Session-Id",this.F),Ja(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(za(a)))+"&"+t:this.o&&qa(n,this.o,a)),ga(this.i,i),this.bb&&Qi(n,"TYPE","init"),this.P?(Qi(n,"$req",t),Qi(n,"SID","null"),i.aa=!0,Ai(i,n,null)):Ai(i,n,t),this.H=2}}else 3==this.H&&(e?Xa(this,e):0==this.j.length||fa(this.i)||Xa(this))},Tn.Ma=function(){if(this.u=null,ns(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=pi(Mn(this.jb,this),e)}},Tn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,hi(10),Ga(this),ns(this))},Tn.ib=function(){null!=this.v&&(this.v=null,Ga(this),es(this),hi(19))},Tn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),hi(2)):(this.l.info("Failed to ping google.com"),hi(1))},Tn.isActive=function(){return!!this.h&&this.h.isActive(this)},(Tn=us.prototype).Ba=function(){},Tn.Aa=function(){},Tn.za=function(){},Tn.ya=function(){},Tn.isActive=function(){return!0},Tn.Va=function(){},ds.prototype.g=function(e,t){return new hs(e,t)},Fn(hs,Or),hs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;hi(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ls(e,null,e.Y),$a(e)},hs.prototype.close=function(){Ka(this.g)},hs.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ur(e),e=n);t.j.push(new ua(t.fb++,e)),3==t.H&&$a(t)},hs.prototype.N=function(){this.g.h=null,delete this.j,Ka(this.g),delete this.g,hs.$.N.call(this)},Fn(fs,_i),Fn(ps,Si),Fn(ms,us),ms.prototype.Ba=function(){Lr(this.g,"a")},ms.prototype.Aa=function(e){Lr(this.g,new fs(e))},ms.prototype.za=function(e){Lr(this.g,new ps)},ms.prototype.ya=function(){Lr(this.g,"b")},Fn(gs,(function(){this.blockSize=-1})),gs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},gs.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)ys(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){ys(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){ys(this,r),i=0;break}}this.h=i,this.i+=t},gs.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ws={};function bs(e){return-128<=e&&128>e?function(e,t){var n=ws;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new vs([0|e],0>e?-1:0)})):new vs([0|e],0>e?-1:0)}function Es(e){if(isNaN(e)||!isFinite(e))return Ss;if(0>e)return Is(Es(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=_s;return new vs(t,0)}var _s=4294967296,Ss=bs(0),ks=bs(1),xs=bs(16777216);function Ts(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Cs(e){return-1==e.h}function Is(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new vs(n,~e.h).add(ks)}function Ns(e,t){return e.add(Is(t))}function As(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ds(e,t){this.g=e,this.h=t}function Rs(e,t){if(Ts(t))throw Error("division by zero");if(Ts(e))return new Ds(Ss,Ss);if(Cs(e))return t=Rs(Is(e),t),new Ds(Is(t.g),Is(t.h));if(Cs(t))return t=Rs(e,Is(t)),new Ds(Is(t.g),t.h);if(30<e.g.length){if(Cs(e)||Cs(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ks,r=t;0>=r.X(e);)n=Ps(n),r=Ps(r);var i=js(n,1),a=js(r,1);for(r=js(r,2),n=js(n,2);!Ts(r);){var s=a.add(r);0>=s.X(e)&&(i=i.add(n),a=s),r=js(r,1),n=js(n,1)}return t=Ns(e,i.R(t)),new Ds(i,t)}for(i=Ss;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(a=Es(n)).R(t);Cs(s)||0<s.X(e);)s=(a=Es(n-=r)).R(t);Ts(a)&&(a=ks),i=i.add(a),e=Ns(e,s)}return new Ds(i,e)}function Ps(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new vs(n,e.h)}function js(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new vs(i,e.h)}(Tn=vs.prototype).ea=function(){if(Cs(this))return-Is(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:_s+r)*t,t*=_s}return e},Tn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ts(this))return"0";if(Cs(this))return"-"+Is(this).toString(e);for(var t=Es(Math.pow(e,6)),n=this,r="";;){var i=Rs(n,t).g,a=((0<(n=Ns(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ts(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Tn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Tn.X=function(e){return Cs(e=Ns(this,e))?-1:Ts(e)?0:1},Tn.abs=function(){return Cs(this)?Is(this):this},Tn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),s=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,a&=65535,s&=65535,n[i]=s<<16|a}return new vs(n,-2147483648&n[n.length-1]?-1:0)},Tn.R=function(e){if(Ts(this)||Ts(e))return Ss;if(Cs(this))return Cs(e)?Is(this).R(Is(e)):Is(Is(this).R(e));if(Cs(e))return Is(this.R(Is(e)));if(0>this.X(xs)&&0>e.X(xs))return Es(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,s=65535&this.D(r),o=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,As(n,2*r+2*i),n[2*r+2*i+1]+=a*l,As(n,2*r+2*i+1),n[2*r+2*i+1]+=s*o,As(n,2*r+2*i+1),n[2*r+2*i+2]+=a*o,As(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new vs(n,0)},Tn.gb=function(e){return Rs(this,e).h},Tn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new vs(n,this.h&e.h)},Tn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new vs(n,this.h|e.h)},Tn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new vs(n,this.h^e.h)},ds.prototype.createWebChannel=ds.prototype.g,hs.prototype.send=hs.prototype.u,hs.prototype.open=hs.prototype.m,hs.prototype.close=hs.prototype.close,mi.NO_ERROR=0,mi.TIMEOUT=8,mi.HTTP_ERROR=6,gi.COMPLETE="complete",wi.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",Or.prototype.listen=Or.prototype.O,Da.prototype.listenOnce=Da.prototype.P,Da.prototype.getLastError=Da.prototype.Sa,Da.prototype.getLastErrorCode=Da.prototype.Ia,Da.prototype.getStatus=Da.prototype.da,Da.prototype.getResponseJson=Da.prototype.Wa,Da.prototype.getResponseText=Da.prototype.ja,Da.prototype.send=Da.prototype.ha,Da.prototype.setWithCredentials=Da.prototype.Oa,gs.prototype.digest=gs.prototype.l,gs.prototype.reset=gs.prototype.reset,gs.prototype.update=gs.prototype.j,vs.prototype.add=vs.prototype.add,vs.prototype.multiply=vs.prototype.R,vs.prototype.modulo=vs.prototype.gb,vs.prototype.compare=vs.prototype.X,vs.prototype.toNumber=vs.prototype.ea,vs.prototype.toString=vs.prototype.toString,vs.prototype.getBits=vs.prototype.D,vs.fromNumber=Es,vs.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Is(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Es(Math.pow(n,8)),i=Ss,a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a),o=parseInt(t.substring(a,a+s),n);8>s?(s=Es(Math.pow(n,s)),i=i.R(s).add(Es(o))):i=(i=i.R(r)).add(Es(o))}return i};var Os=In.createWebChannelTransport=function(){return new ds},Ls=In.getStatEventTarget=function(){return li()},Ms=In.ErrorCode=mi,Us=In.EventType=gi,Fs=In.Event=si,Vs=In.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Bs=In.FetchXmlHttpFactory=ka,zs=In.WebChannel=wi,qs=In.XhrIo=Da,Hs=In.Md5=gs,Ws=In.Integer=vs;const Ks="@firebase/firestore";class Gs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gs.UNAUTHENTICATED=new Gs(null),Gs.GOOGLE_CREDENTIALS=new Gs("google-credentials-uid"),Gs.FIRST_PARTY=new Gs("first-party-uid"),Gs.MOCK_USER=new Gs("mock-user");let Qs="10.11.1";const $s=new at("@firebase/firestore");function Xs(){return $s.logLevel}function Js(e){if($s.logLevel<=et.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(eo);$s.debug("Firestore (".concat(Qs,"): ").concat(e),...i)}}function Ys(e){if($s.logLevel<=et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(eo);$s.error("Firestore (".concat(Qs,"): ").concat(e),...i)}}function Zs(e){if($s.logLevel<=et.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(eo);$s.warn("Firestore (".concat(Qs,"): ").concat(e),...i)}}function eo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function to(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Qs,") INTERNAL ASSERTION FAILED: ")+e;throw Ys(t),new Error(t)}function no(e,t){e||to()}function ro(e,t){return e}const io={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ao extends Pe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class so{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class oo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class lo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gs.UNAUTHENTICATED)))}shutdown(){}}class co{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uo{constructor(e){this.t=e,this.currentUser=Gs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new so;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new so,e.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Js("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Js("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new so)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Js("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(no("string"==typeof t.accessToken),new oo(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return no(null===e||"string"==typeof e),new Gs(e)}}class ho{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Gs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ho(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Gs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class po{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Js("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Js("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Js("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Js("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(no("string"==typeof e.token),this.R=e.token,new po(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function go(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class yo{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=go(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function vo(e,t){return e<t?-1:e>t?1:0}function wo(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class bo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ao(io.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ao(io.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ao(io.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ao(io.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bo.fromMillis(Date.now())}static fromDate(e){return bo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new bo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vo(this.nanoseconds,e.nanoseconds):vo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Eo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Eo(e)}static min(){return new Eo(new bo(0,0))}static max(){return new Eo(new bo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _o{constructor(e,t,n){void 0===t?t=0:t>e.length&&to(),void 0===n?n=e.length-t:n>e.length-t&&to(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===_o.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _o?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class So extends _o{construct(e,t,n){return new So(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ao(io.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new So(e)}static emptyPath(){return new So([])}}const ko=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xo extends _o{construct(e,t,n){return new xo(e,t,n)}static isValidIdentifier(e){return ko.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xo.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xo(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ao(io.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ao(io.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ao(io.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(i(),r++)}if(i(),a)throw new ao(io.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xo(t)}static emptyPath(){return new xo([])}}class To{constructor(e){this.path=e}static fromPath(e){return new To(So.fromString(e))}static fromName(e){return new To(So.fromString(e).popFirst(5))}static empty(){return new To(So.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===So.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return So.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new To(new So(e.slice()))}}class Co{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Co.UNKNOWN_ID=-1;function Io(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Eo.fromTimestamp(1e9===r?new bo(n+1,0):new bo(n,r));return new Ao(i,To.empty(),t)}function No(e){return new Ao(e.readTime,e.key,-1)}class Ao{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ao(Eo.min(),To.empty(),-1)}static max(){return new Ao(Eo.max(),To.empty(),-1)}}function Do(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=To.comparator(e.documentKey,t.documentKey),0!==n?n:vo(e.largestBatchId,t.largestBatchId))}const Ro="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Po{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jo(e){if(e.code!==io.FAILED_PRECONDITION||e.message!==Ro)throw e;Js("LocalStore","Unexpectedly lost primary lease")}class Oo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&to(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Oo(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Oo?t:Oo.resolve(t)}catch(e){return Oo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Oo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Oo.reject(t)}static resolve(e){return new Oo(((t,n)=>{t(e)}))}static reject(e){return new Oo(((t,n)=>{n(e)}))}static waitFor(e){return new Oo(((t,n)=>{let r=0,i=0,a=!1;e.forEach((e=>{++r,e.next((()=>{++i,a&&i===r&&t()}),(e=>n(e)))})),a=!0,i===r&&t()}))}static or(e){let t=Oo.resolve(!1);for(const n of e)t=t.next((e=>e?Oo.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Oo(((n,r)=>{const i=e.length,a=new Array(i);let s=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{a[l]=e,++s,s===i&&n(a)}),(e=>r(e)))}}))}static doWhile(e,t){return new Oo(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Lo(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(e){return"IndexedDbTransactionError"===e.name}class Uo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Fo(e){return null==e}function Vo(e){return 0===e&&1/e==-1/0}function Bo(e){return"number"==typeof e&&Number.isInteger(e)&&!Vo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Uo.oe=-1;const zo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ho=qo;function Wo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ko(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Go(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Qo{constructor(e,t){this.comparator=e,this.root=t||Xo.EMPTY}insert(e,t){return new Qo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xo.BLACK,null,null))}remove(e){return new Qo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $o(this.root,e,this.comparator,!1)}getReverseIterator(){return new $o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $o(this.root,e,this.comparator,!0)}}class $o{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Xo.RED,this.left=null!=r?r:Xo.EMPTY,this.right=null!=i?i:Xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Xo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Xo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw to();if(this.right.isRed())throw to();const e=this.left.check();if(e!==this.right.check())throw to();return e+(this.isRed()?0:1)}}Xo.EMPTY=null,Xo.RED=!0,Xo.BLACK=!1,Xo.EMPTY=new class{constructor(){this.size=0}get key(){throw to()}get value(){throw to()}get color(){throw to()}get left(){throw to()}get right(){throw to()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Xo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jo{constructor(e){this.comparator=e,this.data=new Qo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yo(this.data.getIterator())}getIteratorFrom(e){return new Yo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Jo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jo(this.comparator);return t.data=e,t}}class Yo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zo{constructor(e){this.fields=e,e.sort(xo.comparator)}static empty(){return new Zo([])}unionWith(e){let t=new Jo(xo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Zo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class el extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new el("Invalid base64 string: "+e):e}}(e);return new tl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new tl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tl.EMPTY_BYTE_STRING=new tl("");const nl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rl(e){if(no(!!e),"string"==typeof e){let t=0;const n=nl.exec(e);if(no(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:il(e.seconds),nanos:il(e.nanos)}}function il(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function al(e){return"string"==typeof e?tl.fromBase64String(e):tl.fromUint8Array(e)}function sl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ol(e){const t=e.mapValue.fields.__previous_value__;return sl(t)?ol(t):t}function ll(e){const t=rl(e.mapValue.fields.__local_write_time__.timestampValue);return new bo(t.seconds,t.nanos)}class cl{constructor(e,t,n,r,i,a,s,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l}}class ul{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ul("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}const dl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function hl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sl(e)?4:xl(e)?9007199254740991:10:to()}function fl(e,t){if(e===t)return!0;const n=hl(e);if(n!==hl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ll(e).isEqual(ll(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=rl(e.timestampValue),r=rl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return al(e.bytesValue).isEqual(al(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return il(e.geoPointValue.latitude)===il(t.geoPointValue.latitude)&&il(e.geoPointValue.longitude)===il(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return il(e.integerValue)===il(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=il(e.doubleValue),r=il(t.doubleValue);return n===r?Vo(n)===Vo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wo(e.arrayValue.values||[],t.arrayValue.values||[],fl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Wo(n)!==Wo(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!fl(n[i],r[i])))return!1;return!0}(e,t);default:return to()}}function pl(e,t){return void 0!==(e.values||[]).find((e=>fl(e,t)))}function ml(e,t){if(e===t)return 0;const n=hl(e),r=hl(t);if(n!==r)return vo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=il(e.integerValue||e.doubleValue),r=il(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return gl(e.timestampValue,t.timestampValue);case 4:return gl(ll(e),ll(t));case 5:return vo(e.stringValue,t.stringValue);case 6:return function(e,t){const n=al(e),r=al(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=vo(n[i],r[i]);if(0!==e)return e}return vo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=vo(il(e.latitude),il(t.latitude));return 0!==n?n:vo(il(e.longitude),il(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ml(n[i],r[i]);if(e)return e}return vo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===dl.mapValue&&t===dl.mapValue)return 0;if(e===dl.mapValue)return 1;if(t===dl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let s=0;s<r.length&&s<a.length;++s){const e=vo(r[s],a[s]);if(0!==e)return e;const t=ml(n[r[s]],i[a[s]]);if(0!==t)return t}return vo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw to()}}function gl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return vo(e,t);const n=rl(e),r=rl(t),i=vo(n.seconds,r.seconds);return 0!==i?i:vo(n.nanos,r.nanos)}function yl(e){return vl(e)}function vl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=rl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return al(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return To.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=vl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(vl(e.fields[i]));return n+"}"}(e.mapValue):to()}function wl(e){return!!e&&"integerValue"in e}function bl(e){return!!e&&"arrayValue"in e}function El(e){return!!e&&"nullValue"in e}function _l(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Sl(e){return!!e&&"mapValue"in e}function kl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ko(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=kl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=kl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Tl{constructor(e){this.value=e}static empty(){return new Tl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Sl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(t)}setAll(e){let t=xo.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=kl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Sl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Sl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ko(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Tl(kl(this.value))}}function Cl(e){const t=[];return Ko(e.fields,((e,n)=>{const r=new xo([e]);if(Sl(n)){const e=Cl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Zo(t)}class Il{constructor(e,t,n,r,i,a,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=s}static newInvalidDocument(e){return new Il(e,0,Eo.min(),Eo.min(),Eo.min(),Tl.empty(),0)}static newFoundDocument(e,t,n,r){return new Il(e,1,t,Eo.min(),n,r,0)}static newNoDocument(e,t){return new Il(e,2,t,Eo.min(),Eo.min(),Tl.empty(),0)}static newUnknownDocument(e,t){return new Il(e,3,t,Eo.min(),Eo.min(),Tl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Eo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Eo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Il&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Il(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Nl{constructor(e,t){this.position=e,this.inclusive=t}}function Al(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const a=t[i],s=e.position[i];if(r=a.field.isKeyField()?To.comparator(To.fromName(s.referenceValue),n.key):ml(s,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Dl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!fl(e.position[n],t.position[n]))return!1;return!0}class Rl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Pl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class jl{}class Ol extends jl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ql(e,t,n):"array-contains"===t?new Gl(e,n):"in"===t?new Ql(e,n):"not-in"===t?new $l(e,n):"array-contains-any"===t?new Xl(e,n):new Ol(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Hl(e,n):new Wl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ml(t,this.value)):null!==t&&hl(this.value)===hl(t)&&this.matchesComparison(ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return to()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ll extends jl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ll(e,t)}matches(e){return Ml(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ml(e){return"and"===e.op}function Ul(e){return Fl(e)&&Ml(e)}function Fl(e){for(const t of e.filters)if(t instanceof Ll)return!1;return!0}function Vl(e){if(e instanceof Ol)return e.field.canonicalString()+e.op.toString()+yl(e.value);if(Ul(e))return e.filters.map((e=>Vl(e))).join(",");{const t=e.filters.map((e=>Vl(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Bl(e,t){return e instanceof Ol?function(e,t){return t instanceof Ol&&e.op===t.op&&e.field.isEqual(t.field)&&fl(e.value,t.value)}(e,t):e instanceof Ll?function(e,t){return t instanceof Ll&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Bl(n,t.filters[r])),!0)}(e,t):void to()}function zl(e){return e instanceof Ol?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(yl(e.value))}(e):e instanceof Ll?function(e){return e.op.toString()+" {"+e.getFilters().map(zl).join(" ,")+"}"}(e):"Filter"}class ql extends Ol{constructor(e,t,n){super(e,t,n),this.key=To.fromName(n.referenceValue)}matches(e){const t=To.comparator(e.key,this.key);return this.matchesComparison(t)}}class Hl extends Ol{constructor(e,t){super(e,"in",t),this.keys=Kl("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Wl extends Ol{constructor(e,t){super(e,"not-in",t),this.keys=Kl("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Kl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>To.fromName(e.referenceValue)))}class Gl extends Ol{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bl(t)&&pl(t.arrayValue,this.value)}}class Ql extends Ol{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pl(this.value.arrayValue,t)}}class $l extends Ol{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pl(this.value.arrayValue,t)}}class Xl extends Ol{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>pl(this.value.arrayValue,e)))}}class Jl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=s,this.ue=null}}function Yl(e){return new Jl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Zl(e){const t=ro(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Vl(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Fo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>yl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>yl(e))).join(",")),t.ue=e}return t.ue}function ec(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Pl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Bl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Dl(e.startAt,t.startAt)&&Dl(e.endAt,t.endAt)}function tc(e){return To.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class nc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=s,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rc(e,t,n,r,i,a,s,o){return new nc(e,t,n,r,i,a,s,o)}function ic(e){return new nc(e)}function ac(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function sc(e){return null!==e.collectionGroup}function oc(e){const t=ro(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Jo(xo.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Rl(r,n))})),e.has(xo.keyField().canonicalString())||t.ce.push(new Rl(xo.keyField(),n))}return t.ce}function lc(e){const t=ro(e);return t.le||(t.le=cc(t,oc(e))),t.le}function cc(e,t){if("F"===e.limitType)return Yl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Rl(e.field,t)}));const n=e.endAt?new Nl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nl(e.startAt.position,e.startAt.inclusive):null;return Yl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function uc(e,t,n){return new nc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dc(e,t){return ec(lc(e),lc(t))&&e.limitType===t.limitType}function hc(e){return"".concat(Zl(lc(e)),"|lt:").concat(e.limitType)}function fc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>zl(e))).join(", "),"]")),Fo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>yl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>yl(e))).join(",")),"Target(".concat(t,")")}(lc(e)),"; limitType=").concat(e.limitType,")")}function pc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):To.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of oc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Al(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,oc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Al(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,oc(e),t))}(e,t)}function mc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gc(e){return(t,n)=>{let r=!1;for(const i of oc(e)){const e=yc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function yc(e,t,n){const r=e.field.isKeyField()?To.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ml(r,i):to()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return to()}}class vc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ko(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Go(this.inner)}size(){return this.innerSize}}const wc=new Qo(To.comparator);function bc(){return wc}const Ec=new Qo(To.comparator);function _c(){let e=Ec;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Sc(e){let t=Ec;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function kc(){return Tc()}function xc(){return Tc()}function Tc(){return new vc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Cc=new Qo(To.comparator),Ic=new Jo(To.comparator);function Nc(){let e=Ic;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ac=new Jo(vo);function Dc(){return Ac}function Rc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vo(t)?"-0":t}}function Pc(e){return{integerValue:""+e}}function jc(e,t){return Bo(t)?Pc(t):Rc(e,t)}class Oc{constructor(){this._=void 0}}function Lc(e,t,n){return e instanceof Fc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&sl(t)&&(t=ol(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Vc?Bc(e,t):e instanceof zc?qc(e,t):function(e,t){const n=Uc(e,t),r=Wc(n)+Wc(e.Pe);return wl(n)&&wl(e.Pe)?Pc(r):Rc(e.serializer,r)}(e,t)}function Mc(e,t,n){return e instanceof Vc?Bc(e,t):e instanceof zc?qc(e,t):n}function Uc(e,t){return e instanceof Hc?function(e){return wl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Fc extends Oc{}class Vc extends Oc{constructor(e){super(),this.elements=e}}function Bc(e,t){const n=Kc(t);for(const r of e.elements)n.some((e=>fl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class zc extends Oc{constructor(e){super(),this.elements=e}}function qc(e,t){let n=Kc(t);for(const r of e.elements)n=n.filter((e=>!fl(e,r)));return{arrayValue:{values:n}}}class Hc extends Oc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Wc(e){return il(e.integerValue||e.doubleValue)}function Kc(e){return bl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Gc{constructor(e,t){this.version=e,this.transformResults=t}}class Qc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qc}static exists(e){return new Qc(void 0,e)}static updateTime(e){return new Qc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $c(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Xc{}function Jc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ou(e.key,Qc.none()):new nu(e.key,e.data,Qc.none());{const n=e.data,r=Tl.empty();let i=new Jo(xo.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ru(e.key,r,new Zo(i.toArray()),Qc.none())}}function Yc(e,t,n){e instanceof nu?function(e,t,n){const r=e.value.clone(),i=au(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ru?function(e,t,n){if(!$c(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=au(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(iu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Zc(e,t,n,r){return e instanceof nu?function(e,t,n,r){if(!$c(e.precondition,t))return n;const i=e.value.clone(),a=su(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ru?function(e,t,n,r){if(!$c(e.precondition,t))return n;const i=su(e.fieldTransforms,r,t),a=t.data;return a.setAll(iu(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return $c(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function eu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Uc(r.transform,e||null);null!=i&&(null===n&&(n=Tl.empty()),n.set(r.field,i))}return n||null}function tu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wo(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Vc&&t instanceof Vc||e instanceof zc&&t instanceof zc?wo(e.elements,t.elements,fl):e instanceof Hc&&t instanceof Hc?fl(e.Pe,t.Pe):e instanceof Fc&&t instanceof Fc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class nu extends Xc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ru extends Xc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function iu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function au(e,t,n){const r=new Map;no(e.length===n.length);for(let i=0;i<n.length;i++){const a=e[i],s=a.transform,o=t.data.field(a.field);r.set(a.field,Mc(s,o,n[i]))}return r}function su(e,t,n){const r=new Map;for(const i of e){const e=i.transform,a=n.data.field(i.field);r.set(i.field,Lc(e,a,t))}return r}class ou extends Xc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lu extends Xc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Yc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Zc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Zc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=xc();return this.mutations.forEach((r=>{const i=e.get(r.key),a=i.overlayedDocument;let s=this.applyToLocalView(a,i.mutatedFields);s=t.has(r.key)?null:s;const o=Jc(a,s);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(Eo.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Nc())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,((e,t)=>tu(e,t)))&&wo(this.baseMutations,e.baseMutations,((e,t)=>tu(e,t)))}}class uu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){no(e.mutations.length===n.length);let r=Cc;const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new uu(e,t,n,r)}}class du{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class hu{constructor(e,t){this.count=e,this.unchangedNames=t}}var fu,pu;function mu(e){switch(e){default:return to();case io.CANCELLED:case io.UNKNOWN:case io.DEADLINE_EXCEEDED:case io.RESOURCE_EXHAUSTED:case io.INTERNAL:case io.UNAVAILABLE:case io.UNAUTHENTICATED:return!1;case io.INVALID_ARGUMENT:case io.NOT_FOUND:case io.ALREADY_EXISTS:case io.PERMISSION_DENIED:case io.FAILED_PRECONDITION:case io.ABORTED:case io.OUT_OF_RANGE:case io.UNIMPLEMENTED:case io.DATA_LOSS:return!0}}function gu(e){if(void 0===e)return Ys("GRPC error has no .code"),io.UNKNOWN;switch(e){case fu.OK:return io.OK;case fu.CANCELLED:return io.CANCELLED;case fu.UNKNOWN:return io.UNKNOWN;case fu.DEADLINE_EXCEEDED:return io.DEADLINE_EXCEEDED;case fu.RESOURCE_EXHAUSTED:return io.RESOURCE_EXHAUSTED;case fu.INTERNAL:return io.INTERNAL;case fu.UNAVAILABLE:return io.UNAVAILABLE;case fu.UNAUTHENTICATED:return io.UNAUTHENTICATED;case fu.INVALID_ARGUMENT:return io.INVALID_ARGUMENT;case fu.NOT_FOUND:return io.NOT_FOUND;case fu.ALREADY_EXISTS:return io.ALREADY_EXISTS;case fu.PERMISSION_DENIED:return io.PERMISSION_DENIED;case fu.FAILED_PRECONDITION:return io.FAILED_PRECONDITION;case fu.ABORTED:return io.ABORTED;case fu.OUT_OF_RANGE:return io.OUT_OF_RANGE;case fu.UNIMPLEMENTED:return io.UNIMPLEMENTED;case fu.DATA_LOSS:return io.DATA_LOSS;default:return to()}}(pu=fu||(fu={}))[pu.OK=0]="OK",pu[pu.CANCELLED=1]="CANCELLED",pu[pu.UNKNOWN=2]="UNKNOWN",pu[pu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pu[pu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pu[pu.NOT_FOUND=5]="NOT_FOUND",pu[pu.ALREADY_EXISTS=6]="ALREADY_EXISTS",pu[pu.PERMISSION_DENIED=7]="PERMISSION_DENIED",pu[pu.UNAUTHENTICATED=16]="UNAUTHENTICATED",pu[pu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pu[pu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pu[pu.ABORTED=10]="ABORTED",pu[pu.OUT_OF_RANGE=11]="OUT_OF_RANGE",pu[pu.UNIMPLEMENTED=12]="UNIMPLEMENTED",pu[pu.INTERNAL=13]="INTERNAL",pu[pu.UNAVAILABLE=14]="UNAVAILABLE",pu[pu.DATA_LOSS=15]="DATA_LOSS";let yu=null;function vu(){return new TextEncoder}const wu=new Ws([4294967295,4294967295],0);function bu(e){const t=vu().encode(e),n=new Hs;return n.update(t),new Uint8Array(n.digest())}function Eu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Ws([n,r],0),new Ws([i,a],0)]}class _u{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Su("Invalid padding: ".concat(t));if(n<0)throw new Su("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Su("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Su("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Ws.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Ws.fromNumber(n)));return 1===r.compare(wu)&&(r=new Ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=bu(e),[n,r]=Eu(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new _u(i,r,t);return n.forEach((e=>a.insert(e))),a}insert(e){if(0===this.Ie)return;const t=bu(e),[n,r]=Eu(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ku{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ku(Eo.min(),r,new Qo(vo),bc(),Nc())}}class xu{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xu(n,t,Nc(),Nc(),Nc())}}class Tu{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Cu{constructor(e,t){this.targetId=e,this.me=t}}class Iu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Nu{constructor(){this.fe=0,this.ge=Ru(),this.pe=tl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Nc(),t=Nc(),n=Nc();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:to()}})),new xu(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Ru()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,no(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Au{constructor(e){this.Le=e,this.Be=new Map,this.ke=bc(),this.qe=Du(),this.Qe=new Qo(vo)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:to()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(tc(i))if(0===n){const e=new To(i.path);this.Ue(t,e,Il.newNoDocument(e,Eo.min()))}else no(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==yu||yu.et(function(e,t,n,r,i){var a,s,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(l=null===(o=null===(s=null==h?void 0:h.bits)||void 0===s?void 0:s.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let a,s;try{a=al(n).toUint8Array()}catch(e){if(e instanceof el)return Zs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new _u(a,r,i)}catch(e){return Zs(e instanceof Su?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Ie?null:s}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),a="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(a)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&tc(i.target)){const t=new To(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Il.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Nc();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new ku(e,t,this.Qe,this.ke,n);return this.ke=bc(),this.qe=Du(),this.Qe=new Qo(vo),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Nu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Jo(vo),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Js("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Nu),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Du(){return new Qo(To.comparator)}function Ru(){return new Qo(To.comparator)}const Pu={asc:"ASCENDING",desc:"DESCENDING"},ju={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ou={and:"AND",or:"OR"};class Lu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mu(e,t){return e.useProto3Json||Fo(t)?t:{value:t}}function Uu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Fu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Vu(e,t){return Uu(e,t.toTimestamp())}function Bu(e){return no(!!e),Eo.fromTimestamp(function(e){const t=rl(e);return new bo(t.seconds,t.nanos)}(e))}function zu(e,t){return qu(e,t).canonicalString()}function qu(e,t){const n=function(e){return new So(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Hu(e){const t=So.fromString(e);return no(ud(t)),t}function Wu(e,t){return zu(e.databaseId,t.path)}function Ku(e,t){const n=Hu(t);if(n.get(1)!==e.databaseId.projectId)throw new ao(io.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ao(io.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new To(Xu(n))}function Gu(e,t){return zu(e.databaseId,t)}function Qu(e){const t=Hu(e);return 4===t.length?So.emptyPath():Xu(t)}function $u(e){return new So(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xu(e){return no(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ju(e,t,n){return{name:Wu(e,t),fields:n.value.mapValue.fields}}function Yu(e,t){let n;if(t instanceof nu)n={update:Ju(e,t.key,t.value)};else if(t instanceof ou)n={delete:Wu(e,t.key)};else if(t instanceof ru)n={update:Ju(e,t.key,t.data),updateMask:cd(t.fieldMask)};else{if(!(t instanceof lu))return to();n={verify:Wu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Fc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof zc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Hc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw to()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Vu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:to()}(e,t.precondition)),n}function Zu(e,t){return{documents:[Gu(e,t.path)]}}function ed(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Gu(e,i);const a=function(e){if(0!==e.length)return ld(Ll.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:sd(e.field),direction:rd(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Mu(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function td(e){let t=Qu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){no(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=nd(e);return t instanceof Ll&&Ul(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Rl(od(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Fo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Nl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Nl(n,t)}(n.endAt)),rc(t,i,s,a,o,"F",l,c)}function nd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=od(e.unaryFilter.field);return Ol.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=od(e.unaryFilter.field);return Ol.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=od(e.unaryFilter.field);return Ol.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=od(e.unaryFilter.field);return Ol.create(i,"!=",{nullValue:"NULL_VALUE"});default:return to()}}(e):void 0!==e.fieldFilter?function(e){return Ol.create(od(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return to()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ll.create(e.compositeFilter.filters.map((e=>nd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return to()}}(e.compositeFilter.op))}(e):to()}function rd(e){return Pu[e]}function id(e){return ju[e]}function ad(e){return Ou[e]}function sd(e){return{fieldPath:e.canonicalString()}}function od(e){return xo.fromServerFormat(e.fieldPath)}function ld(e){return e instanceof Ol?function(e){if("=="===e.op){if(_l(e.value))return{unaryFilter:{field:sd(e.field),op:"IS_NAN"}};if(El(e.value))return{unaryFilter:{field:sd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_l(e.value))return{unaryFilter:{field:sd(e.field),op:"IS_NOT_NAN"}};if(El(e.value))return{unaryFilter:{field:sd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sd(e.field),op:id(e.op),value:e.value}}}(e):e instanceof Ll?function(e){const t=e.getFilters().map((e=>ld(e)));return 1===t.length?t[0]:{compositeFilter:{op:ad(e.op),filters:t}}}(e):to()}function cd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ud(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class dd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Eo.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Eo.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:tl.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new dd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new dd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class hd{constructor(e){this.ut=e}}function fd(e){const t=td({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?uc(t,t.limit,"L"):t}class pd{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(il(e.integerValue));else if("doubleValue"in e){const n=il(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Vo(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Tt(t,20),"string"==typeof n&&(n=rl(n)),t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(al(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?xl(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):to()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),To.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}pd.St=new pd;class md{constructor(){this.on=new gd}addToCollectionParentIndex(e,t){return this.on.add(t),Oo.resolve()}getCollectionParents(e,t){return Oo.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Oo.resolve()}deleteFieldIndex(e,t){return Oo.resolve()}deleteAllFieldIndexes(e){return Oo.resolve()}createTargetIndexes(e,t){return Oo.resolve()}getDocumentsMatchingTarget(e,t){return Oo.resolve(null)}getIndexType(e,t){return Oo.resolve(0)}getFieldIndexes(e,t){return Oo.resolve([])}getNextCollectionGroupToUpdate(e){return Oo.resolve(null)}getMinOffset(e,t){return Oo.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,t){return Oo.resolve(Ao.min())}updateCollectionGroup(e,t,n){return Oo.resolve()}updateIndexEntries(e,t){return Oo.resolve()}}class gd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Jo(So.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Jo(So.comparator)).toArray()}}new Uint8Array(0);class yd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new yd(e,yd.DEFAULT_COLLECTION_PERCENTILE,yd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}yd.DEFAULT_COLLECTION_PERCENTILE=10,yd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yd.DEFAULT=new yd(41943040,yd.DEFAULT_COLLECTION_PERCENTILE,yd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yd.DISABLED=new yd(-1,0,0);class vd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new vd(0)}static Nn(){return new vd(-1)}}class wd{constructor(){this.changes=new vc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Il.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Oo.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ed{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Zc(n.mutation,e,Zo.empty(),bo.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Nc()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nc();const r=kc();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=_c();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=kc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Nc())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=bc();const a=Tc(),s=Tc();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof ru)?i=i.insert(t.key,t):void 0!==s?(a.set(t.key,s.mutation.getFieldMask()),Zc(s.mutation,t,s.mutation.getFieldMask(),bo.now())):a.set(t.key,Zo.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new bd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Tc();let r=new Qo(((e,t)=>e-t)),i=Nc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const a=t.get(e);if(null===a)return;let s=n.get(e)||Zo.empty();s=i.applyToLocalView(a,s),n.set(e,s);const o=(r.get(i.batchId)||Nc()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const a=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),o=r.key,l=r.value,c=xc();l.forEach((e=>{if(!i.has(e)){const r=Jc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Oo.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return To.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Oo.resolve(kc());let s=-1,o=i;return a.next((t=>Oo.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Oo.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,Nc()))).next((e=>({batchId:s,changes:Sc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new To(t)).next((e=>{let t=_c();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let a=_c();return this.indexManager.getCollectionParents(e,i).next((s=>Oo.forEach(s,(s=>{const o=function(e,t){return new nc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Il.newInvalidDocument(r)))}));let n=_c();return e.forEach(((e,r)=>{const a=i.get(e);void 0!==a&&Zc(a.mutation,r,Zo.empty(),bo.now()),pc(t,r)&&(n=n.insert(e,r))})),n}))}}class _d{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Oo.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Bu(e.createTime)}}(t)),Oo.resolve()}getNamedQuery(e,t){return Oo.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:fd(e.bundledQuery),readTime:Bu(e.readTime)}}(t)),Oo.resolve()}}class Sd{constructor(){this.overlays=new Qo(To.comparator),this.lr=new Map}getOverlay(e,t){return Oo.resolve(this.overlays.get(t))}getOverlays(e,t){const n=kc();return Oo.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Oo.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Oo.resolve()}getOverlaysForCollection(e,t,n){const r=kc(),i=t.length+1,a=new To(t.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const e=s.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Oo.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Qo(((e,t)=>e-t));const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=kc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=kc(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Oo.resolve(s)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new du(t,n));let i=this.lr.get(t);void 0===i&&(i=Nc(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class kd{constructor(){this.hr=new Jo(xd.Pr),this.Ir=new Jo(xd.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new xd(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new xd(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new To(new So([])),n=new xd(t,e),r=new xd(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new To(new So([])),n=new xd(t,e),r=new xd(t,e+1);let i=Nc();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new xd(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class xd{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return To.comparator(e.key,t.key)||vo(e.gr,t.gr)}static Tr(e,t){return vo(e.gr,t.gr)||To.comparator(e.key,t.key)}}class Td{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Jo(xd.Pr)}checkEmpty(e){return Oo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new cu(i,t,n,r);this.mutationQueue.push(a);for(const s of r)this.yr=this.yr.add(new xd(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Oo.resolve(a)}lookupMutationBatch(e,t){return Oo.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return Oo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Oo.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Oo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xd(t,0),r=new xd(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),Oo.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Jo(vo);return t.forEach((e=>{const t=new xd(e,0),r=new xd(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Oo.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;To.isDocumentKey(i)||(i=i.child(""));const a=new xd(new To(i),0);let s=new Jo(vo);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.gr)),!0)}),a),Oo.resolve(this.br(s))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){no(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Oo.forEach(t.mutations,(r=>{const i=new xd(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new xd(t,0),r=this.yr.firstAfterOrEqual(n);return Oo.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oo.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Cd{constructor(e){this.Cr=e,this.docs=new Qo(To.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Oo.resolve(n?n.document.mutableCopy():Il.newInvalidDocument(t))}getEntries(e,t){let n=bc();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Il.newInvalidDocument(e))})),Oo.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=bc();const a=t.path,s=new To(a.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:e,value:{document:s}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Do(No(s),n)<=0||(r.has(s.key)||pc(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Oo.resolve(i)}getAllFromCollectionGroup(e,t,n,r){to()}vr(e,t){return Oo.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Id(this)}getSize(e){return Oo.resolve(this.size)}}class Id extends wd{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Oo.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Nd{constructor(e){this.persistence=e,this.Fr=new vc((e=>Zl(e)),ec),this.lastRemoteSnapshotVersion=Eo.min(),this.highestTargetId=0,this.Mr=0,this.Or=new kd,this.targetCount=0,this.Nr=vd.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Oo.resolve()}getLastRemoteSnapshotVersion(e){return Oo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oo.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Oo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Oo.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new vd(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Oo.resolve()}updateTargetData(e,t){return this.kn(t),Oo.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Oo.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((a,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Fr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Oo.waitFor(i).next((()=>r))}getTargetCount(e){return Oo.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Oo.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Oo.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Oo.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Oo.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Oo.resolve(n)}containsKey(e,t){return Oo.resolve(this.Or.containsKey(t))}}class Ad{constructor(e,t){this.Lr={},this.overlays={},this.Br=new Uo(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Nd(this),this.indexManager=new md,this.remoteDocumentCache=function(e){return new Cd(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new hd(t),this.Kr=new _d(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Td(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Js("MemoryPersistence","Starting transaction:",e);const r=new Dd(this.Br.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Oo.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Dd extends Po{constructor(e){super(),this.currentSequenceNumber=e}}class Rd{constructor(e){this.persistence=e,this.Gr=new kd,this.zr=null}static jr(e){return new Rd(e)}get Hr(){if(this.zr)return this.zr;throw to()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Oo.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Oo.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Oo.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oo.forEach(this.Hr,(n=>{const r=To.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Eo.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Oo.or([()=>Oo.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Pd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Nc(),r=Nc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Pd(e,t.fromCache,n,r)}}class jd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Od{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=Ae()?8:Lo(Ie())>0?6:4}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new jd;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Xs()<=et.DEBUG&&Js("QueryEngine","SDK will not create cache indexes for query:",fc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Oo.resolve()):(Xs()<=et.DEBUG&&Js("QueryEngine","Query:",fc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Xs()<=et.DEBUG&&Js("QueryEngine","The SDK decides to create cache indexes for query:",fc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lc(t))):Oo.resolve())}zi(e,t){if(ac(t))return Oo.resolve(null);let n=lc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=uc(t,null,"F"),n=lc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Nc(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const a=this.Yi(t,r);return this.Zi(t,a,i,n.readTime)?this.zi(e,uc(t,null,"F")):this.Xi(e,a,t,n)}))))})))))}ji(e,t,n,r){return ac(t)||r.isEqual(Eo.min())?Oo.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const a=this.Yi(t,i);return this.Zi(t,a,n,r)?Oo.resolve(null):(Xs()<=et.DEBUG&&Js("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fc(t)),this.Xi(e,a,t,Io(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Jo(gc(e));return t.forEach(((t,r)=>{pc(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Xs()<=et.DEBUG&&Js("QueryEngine","Using full collection scan to execute query:",fc(t)),this.Gi.getDocumentsMatchingQuery(e,t,Ao.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Ld{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Qo(vo),this.ns=new vc((e=>Zl(e)),ec),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ed(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Md(e,t,n,r){return new Ld(e,t,n,r)}async function Ud(e,t){const n=ro(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],a=[];let s=Nc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function Fd(e){const t=ro(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function Vd(e,t,n){let r=Nc(),i=Nc();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=bc();return n.forEach(((n,a)=>{const s=e.get(n);a.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Eo.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Js("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),{us:r,cs:i}}))}function Bd(e,t){const n=ro(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function zd(e,t){const n=ro(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,Oo.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new dd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function qd(e,t,n){const r=ro(e),i=r.ts.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Mo(e))throw e;Js("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function Hd(e,t,n){const r=ro(e);let i=Eo.min(),a=Nc();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ro(e),i=r.ns.get(n);return void 0!==i?Oo.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,lc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:Eo.min(),n?a:Nc()))).next((e=>(Wd(r,mc(t),e),{documents:e,ls:a})))))}function Wd(e,t,n){let r=e.rs.get(t)||Eo.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}class Kd{constructor(){this.activeTargetIds=Dc()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gd{constructor(){this.eo=new Kd,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Kd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Qd{ro(e){}shutdown(){}}class $d{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Js("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Js("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xd=null;function Jd(){return null===Xd?Xd=268435456+Math.round(2147483648*Math.random()):Xd++,"0x"+Xd.toString(16)}const Yd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zd{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}const eh="WebChannelConnection";class th extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.yo=t+"://"+e.host,this.wo="projects/".concat(n,"/databases/").concat(r),this.So="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get bo(){return!1}Do(e,t,n,r,i){const a=Jd(),s=this.Co(e,t.toUriEncodedString());Js("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),s,n);const o={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(o,r,i),this.Fo(e,s,o,n).then((t=>(Js("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t)),(t=>{throw Zs("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",s,"request:",n),t}))}Mo(e,t,n,r,i,a){return this.Do(e,t,n,r,i)}vo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Co(e,t){const n=Yd[e];return"".concat(this.yo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,n,r){const i=Jd();return new Promise(((a,s)=>{const o=new qs;o.setWithCredentials(!0),o.listenOnce(Us.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Ms.NO_ERROR:const t=o.getResponseJson();Js(eh,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Ms.TIMEOUT:Js(eh,"RPC '".concat(e,"' ").concat(i," timed out")),s(new ao(io.DEADLINE_EXCEEDED,"Request time out"));break;case Ms.HTTP_ERROR:const n=o.getStatus();if(Js(eh,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(io).indexOf(t)>=0?t:io.UNKNOWN}(t.status);s(new ao(e,t.message))}else s(new ao(io.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new ao(io.UNAVAILABLE,"Connection failed."));break;default:to()}}finally{Js(eh,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Js(eh,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)}))}xo(e,t,n){const r=Jd(),i=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Os(),s=Ls(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new Bs({})),this.vo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Js(eh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=a.createWebChannel(c,o);let d=!1,h=!1;const f=new Zd({co:t=>{h?Js(eh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Js(eh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Js(eh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,zs.EventType.OPEN,(()=>{h||(Js(eh,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.Vo())})),p(u,zs.EventType.CLOSE,(()=>{h||(h=!0,Js(eh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.fo())})),p(u,zs.EventType.ERROR,(t=>{h||(h=!0,Zs(eh,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.fo(new ao(io.UNAVAILABLE,"The operation could not be completed")))})),p(u,zs.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];no(!!i);const a=i,s=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(s){Js(eh,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=fu[e];if(void 0!==t)return gu(t)}(t),i=s.message;void 0===n&&(n=io.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.fo(new ao(n,i)),u.close()}else Js(eh,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.po(i)}})),p(s,Fs.STAT_EVENT,(t=>{t.stat===Vs.PROXY?Js(eh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Vs.NOPROXY&&Js(eh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.mo()}),0),f}}function nh(){return"undefined"!=typeof document?document:null}function rh(e){return new Lu(e,!0)}class ih{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Oo=n,this.No=r,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-n);r>0&&Js("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.ko=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.qo=Date.now(),e()))),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){null!==this.ko&&(this.ko.skipDelay(),this.ko=null)}cancel(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}class ah{constructor(e,t,n,r,i,a,s,o){this.si=e,this.Wo=n,this.Go=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new ih(e,t)}Yo(){return 1===this.state||5===this.state||this.Zo()}Zo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&null===this.jo&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,(()=>this.n_())))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,4!==e?this.Jo.reset():t&&t.code===io.RESOURCE_EXHAUSTED?(Ys(t.toString()),Ys("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===io.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.zo===t&&this.a_(n,r)}),(t=>{e((()=>{const e=new ao(io.UNKNOWN,"Fetching auth token failed: "+t.message);return this.u_(e)}))}))}a_(e,t){const n=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho((()=>{n((()=>this.listener.ho()))})),this.stream.Io((()=>{n((()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,(()=>(this.Zo()&&(this.state=3),Promise.resolve()))),this.listener.Io())))})),this.stream.Eo((e=>{n((()=>this.u_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Xo(){this.state=5,this.Jo.Ko((async()=>{this.state=0,this.start()}))}u_(e){return Js("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget((()=>this.zo===e?t():(Js("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sh extends ah{constructor(e,t,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:to()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(no(void 0===t||"string"==typeof t),tl.fromBase64String(t||"")):(no(void 0===t||t instanceof Buffer||t instanceof Uint8Array),tl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&function(e){const t=void 0===e.code?io.UNKNOWN:gu(e.code);return new ao(t,e.message||"")}(s);n=new Iu(r,i,a,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ku(e,r.document.name),a=Bu(r.document.updateTime),s=r.document.createTime?Bu(r.document.createTime):Eo.min(),o=new Tl({mapValue:{fields:r.document.fields}}),l=Il.newFoundDocument(i,a,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Tu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ku(e,r.document),a=r.readTime?Bu(r.readTime):Eo.min(),s=Il.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Tu([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ku(e,r.document),a=r.removedTargetIds||[];n=new Tu([],a,i,null)}else{if(!("filter"in t))return to();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,a=new hu(r,i),s=e.targetId;n=new Cu(s,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Eo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Eo.min():t.readTime?Bu(t.readTime):Eo.min()}(e);return this.listener.l_(t,n)}h_(e){const t={};t.database=$u(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=tc(r)?{documents:Zu(e,r)}:{query:ed(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Fu(e,t.resumeToken);const r=Mu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Eo.min())>0){n.readTime=Uu(e,t.snapshotVersion.toTimestamp());const r=Mu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return to()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.r_(t)}P_(e){const t={};t.database=$u(this.serializer),t.removeTarget=e,this.r_(t)}}class oh extends ah{constructor(e,t,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,t){return this.connection.xo("Write",e,t)}onMessage(e){if(no(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();const t=function(e,t){return e&&e.length>0?(no(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Bu(e.updateTime):Bu(t);return n.isEqual(Eo.min())&&(n=Bu(t)),new Gc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Bu(e.commitTime);return this.listener.d_(n,t)}return no(!e.writeResults||0===e.writeResults.length),this.I_=!0,this.listener.A_()}R_(){const e={};e.database=$u(this.serializer),this.r_(e)}E_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Yu(this.serializer,e)))};this.r_(t)}}class lh extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new ao(io.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,n,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[a,s]=i;return this.connection.Do(e,qu(t,n),r,a,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===io.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ao(io.UNKNOWN,e.toString())}))}Mo(e,t,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((a=>{let[s,o]=a;return this.connection.Mo(e,qu(t,n),r,s,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===io.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ao(io.UNKNOWN,e.toString())}))}terminate(){this.V_=!0,this.connection.terminate()}}class ch{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Ys(t),this.y_=!1):Js("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class uh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.ro((e=>{n.enqueueAndForget((async()=>{wh(this)&&(Js("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ro(e);t.M_.add(4),await hh(t),t.N_.set("Unknown"),t.M_.delete(4),await dh(t)}(this))}))})),this.N_=new ch(n,r)}}async function dh(e){if(wh(e))for(const t of e.x_)await t(!0)}async function hh(e){for(const t of e.x_)await t(!1)}function fh(e,t){const n=ro(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),vh(n)?yh(n):Uh(n).Zo()&&mh(n,t))}function ph(e,t){const n=ro(e),r=Uh(n);n.F_.delete(t),r.Zo()&&gh(n,t),0===n.F_.size&&(r.Zo()?r.t_():wh(n)&&n.N_.set("Unknown"))}function mh(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Eo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Uh(e).h_(t)}function gh(e,t){e.L_.xe(t),Uh(e).P_(t)}function yh(e){e.L_=new Au({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Uh(e).start(),e.N_.w_()}function vh(e){return wh(e)&&!Uh(e).Yo()&&e.F_.size>0}function wh(e){return 0===ro(e).M_.size}function bh(e){e.L_=void 0}async function Eh(e){e.N_.set("Online")}async function _h(e){e.F_.forEach(((t,n)=>{mh(e,t)}))}async function Sh(e,t){bh(e),vh(e)?(e.N_.D_(t),yh(e)):e.N_.set("Unknown")}async function kh(e,t,n){if(e.N_.set("Online"),t instanceof Iu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Js("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await xh(e,n)}else if(t instanceof Tu?e.L_.Ke(t):t instanceof Cu?e.L_.He(t):e.L_.We(t),!n.isEqual(Eo.min()))try{const t=await Fd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(tl.EMPTY_BYTE_STRING,r.snapshotVersion)),gh(e,t);const i=new dd(r.target,t,n,r.sequenceNumber);mh(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Js("RemoteStore","Failed to raise snapshot:",t),await xh(e,t)}}async function xh(e,t,n){if(!Mo(t))throw t;e.M_.add(1),await hh(e),e.N_.set("Offline"),n||(n=()=>Fd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Js("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await dh(e)}))}function Th(e,t){return t().catch((n=>xh(e,n,t)))}async function Ch(e){const t=ro(e),n=Fh(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Ih(t);)try{const e=await Bd(t.localStore,r);if(null===e){0===t.v_.length&&n.t_();break}r=e.batchId,Nh(t,e)}catch(e){await xh(t,e)}Ah(t)&&Dh(t)}function Ih(e){return wh(e)&&e.v_.length<10}function Nh(e,t){e.v_.push(t);const n=Fh(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function Ah(e){return wh(e)&&!Fh(e).Yo()&&e.v_.length>0}function Dh(e){Fh(e).start()}async function Rh(e){Fh(e).R_()}async function Ph(e){const t=Fh(e);for(const n of e.v_)t.E_(n.mutations)}async function jh(e,t,n){const r=e.v_.shift(),i=uu.from(r,t,n);await Th(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Ch(e)}async function Oh(e,t){t&&Fh(e).T_&&await async function(e,t){if(function(e){return mu(e)&&e!==io.ABORTED}(t.code)){const n=e.v_.shift();Fh(e).e_(),await Th(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Ch(e)}}(e,t),Ah(e)&&Dh(e)}async function Lh(e,t){const n=ro(e);n.asyncQueue.verifyOperationInProgress(),Js("RemoteStore","RemoteStore received new credentials");const r=wh(n);n.M_.add(3),await hh(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await dh(n)}async function Mh(e,t){const n=ro(e);t?(n.M_.delete(2),await dh(n)):t||(n.M_.add(2),await hh(n),n.N_.set("Unknown"))}function Uh(e){return e.B_||(e.B_=function(e,t,n){const r=ro(e);return r.m_(),new sh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Eh.bind(null,e),Io:_h.bind(null,e),Eo:Sh.bind(null,e),l_:kh.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.e_(),vh(e)?yh(e):e.N_.set("Unknown")):(await e.B_.stop(),bh(e))}))),e.B_}function Fh(e){return e.k_||(e.k_=function(e,t,n){const r=ro(e);return r.m_(),new oh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:Rh.bind(null,e),Eo:Oh.bind(null,e),A_:Ph.bind(null,e),d_:jh.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.e_(),await Ch(e)):(await e.k_.stop(),e.v_.length>0&&(Js("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class Vh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new so,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const a=Date.now()+n,s=new Vh(e,t,a,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ao(io.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bh(e,t){if(Ys("AsyncQueue","".concat(t,": ").concat(e)),Mo(e))return new ao(io.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class zh{constructor(e){this.comparator=e?(t,n)=>e(t,n)||To.comparator(t.key,n.key):(e,t)=>To.comparator(e.key,t.key),this.keyedMap=_c(),this.sortedSet=new Qo(this.comparator)}static emptySet(e){return new zh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new zh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class qh{constructor(){this.q_=new Qo(To.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):to():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Hh{constructor(e,t,n,r,i,a,s,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const a=[];return t.forEach((e=>{a.push({type:0,doc:e})})),new Hh(e,t,zh.emptySet(t),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Wh{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class Kh{constructor(){this.queries=new vc((e=>hc(e)),dc),this.onlineState="Unknown",this.z_=new Set}}async function Gh(e,t){const n=ro(e);let r=3;const i=t.query;let a=n.queries.get(i);a?!a.W_()&&t.G_()&&(r=2):(a=new Wh,r=t.G_()?0:1);try{switch(r){case 0:a.K_=await n.onListen(i,!0);break;case 1:a.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Bh(e,"Initialization of query '".concat(fc(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,a),a.U_.push(t),t.j_(n.onlineState),a.K_&&t.H_(a.K_)&&Jh(n)}async function Qh(e,t){const n=ro(e),r=t.query;let i=3;const a=n.queries.get(r);if(a){const e=a.U_.indexOf(t);e>=0&&(a.U_.splice(e,1),0===a.U_.length?i=t.G_()?0:1:!a.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $h(e,t){const n=ro(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&Jh(n)}function Xh(e,t,n){const r=ro(e),i=r.queries.get(t);if(i)for(const a of i.U_)a.onError(n);r.queries.delete(t)}function Jh(e){e.z_.forEach((e=>{e.next()}))}var Yh,Zh;(Zh=Yh||(Yh={})).J_="default",Zh.Cache="cache";class ef{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Hh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=Hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Yh.Cache}}class tf{constructor(e){this.key=e}}class nf{constructor(e){this.key=e}}class rf{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Nc(),this.mutatedKeys=Nc(),this.Ia=gc(e),this.Ta=new zh(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new qh,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,a=r,s=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=pc(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Ia(u,o)>0||l&&this.Ia(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(s=!0)),f&&(u?(a=a.add(u),i=h?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:a,Aa:n,Zi:s,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const a=e.Aa.Q_();a.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return to()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const s=t&&!r?this.ma():[],o=0===this.Pa.size&&this.current&&!r?1:0,l=o!==this.ha;return this.ha=o,0!==a.length||l?{snapshot:new Hh(this.query,e.Ta,i,a,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:s}:{fa:s}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new qh,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Nc(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new nf(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new tf(n))})),t}pa(e){this.la=e.ls,this.Pa=Nc();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Hh.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class af{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class sf{constructor(e){this.key=e,this.wa=!1}}class of{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new vc((e=>hc(e)),dc),this.Da=new Map,this.Ca=new Set,this.va=new Qo(To.comparator),this.Fa=new Map,this.Ma=new kd,this.xa={},this.Oa=new Map,this.Na=vd.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function lf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Nf(e);let i;const a=r.ba.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.ya()):i=await uf(r,t,n,!0),i}async function cf(e,t){const n=Nf(e);await uf(n,t,!0,!1)}async function uf(e,t,n,r){const i=await zd(e.localStore,lc(t)),a=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(a):"not-current";let o;return r&&(o=await df(e,t,a,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&fh(e.remoteStore,i),o}async function df(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Zi&&(i=await Hd(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const a=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,a,s);return Sf(e,t.targetId,o.fa),o.snapshot}(e,t,n,r);const a=await Hd(e.localStore,t,!0),s=new rf(t,a.ls),o=s.da(a.documents),l=xu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(o,e.isPrimaryClient,l);Sf(e,n,c.fa);const u=new af(t,n,s);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function hf(e,t,n){const r=ro(e),i=r.ba.get(t),a=r.Da.get(i.targetId);if(a.length>1)return r.Da.set(i.targetId,a.filter((e=>!dc(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qd(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ph(r.remoteStore,i.targetId),Ef(r,i.targetId)})).catch(jo)):(Ef(r,i.targetId),await qd(r.localStore,i.targetId,!0))}async function ff(e,t){const n=ro(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ph(n.remoteStore,r.targetId))}async function pf(e,t){const n=ro(e);try{const e=await function(e,t){const n=ro(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const a=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const s=[];t.targetChanges.forEach(((a,o)=>{const l=i.get(o);if(!l)return;s.push(n.qr.removeMatchingKeys(e,a.removedDocuments,o).next((()=>n.qr.addMatchingKeys(e,a.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(tl.EMPTY_BYTE_STRING,Eo.min()).withLastLimboFreeSnapshotVersion(Eo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,a)&&s.push(n.qr.updateTargetData(e,c))}));let o=bc(),l=Nc();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Vd(e,a,t.documentUpdates).next((e=>{o=e.us,l=e.cs}))),!r.isEqual(Eo.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Oo.waitFor(s).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(no(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?no(r.wa):e.removedDocuments.size>0&&(no(r.wa),r.wa=!1))})),await Tf(n,e,t)}catch(e){await jo(e)}}function mf(e,t,n){const r=ro(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ro(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&Jh(n)}(r.eventManager,t),e.length&&r.Sa.l_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function gf(e,t,n){const r=ro(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),a=i&&i.key;if(a){let e=new Qo(To.comparator);e=e.insert(a,Il.newNoDocument(a,Eo.min()));const n=Nc().add(a),i=new ku(Eo.min(),new Map,new Qo(vo),e,n);await pf(r,i),r.va=r.va.remove(a),r.Fa.delete(t),xf(r)}else await qd(r.localStore,t,!1).then((()=>Ef(r,t,n))).catch(jo)}async function yf(e,t){const n=ro(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ro(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,a=i.keys();let s=Oo.resolve();return a.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const a=n.docVersions.get(e);no(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Nc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);bf(n,r,null),wf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tf(n,e)}catch(e){await jo(e)}}async function vf(e,t,n){const r=ro(e);try{const e=await function(e,t){const n=ro(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(no(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);bf(r,t,n),wf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Tf(r,e)}catch(n){await jo(n)}}function wf(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function bf(e,t,n){const r=ro(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Ef(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach((t=>{e.Ma.containsKey(t)||_f(e,t)}))}function _f(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(ph(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),xf(e))}function Sf(e,t,n){for(const r of n)r instanceof tf?(e.Ma.addReference(r.key,t),kf(e,r)):r instanceof nf?(Js("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||_f(e,r.key)):to()}function kf(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Js("SyncEngine","New document in limbo: "+n),e.Ca.add(r),xf(e))}function xf(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new To(So.fromString(t)),r=e.Na.next();e.Fa.set(r,new sf(n)),e.va=e.va.insert(n,r),fh(e.remoteStore,new dd(lc(ic(n.path)),r,"TargetPurposeLimboResolution",Uo.oe))}}async function Tf(e,t,n){const r=ro(e),i=[],a=[],s=[];r.ba.isEmpty()||(r.ba.forEach(((e,o)=>{s.push(r.Ba(o,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Pd.Qi(o.targetId,e);a.push(t)}})))})),await Promise.all(s),r.Sa.l_(i),await async function(e,t){const n=ro(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Oo.forEach(t,(t=>Oo.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Oo.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Mo(e))throw e;Js("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,a))}async function Cf(e,t){const n=ro(e);if(!n.currentUser.isEqual(t)){Js("SyncEngine","User change. New user:",t.toKey());const e=await Ud(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new ao(io.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Tf(n,e._s)}}function If(e,t){const n=ro(e),r=n.Fa.get(t);if(r&&r.wa)return Nc().add(r.key);{let e=Nc();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}function Nf(e){const t=ro(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=If.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gf.bind(null,t),t.Sa.l_=$h.bind(null,t.eventManager),t.Sa.ka=Xh.bind(null,t.eventManager),t}function Af(e){const t=ro(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vf.bind(null,t),t}class Df{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=rh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Md(this.persistence,new Od,e.initialUser,this.serializer)}createPersistence(e){return new Ad(Rd.jr,this.serializer)}createSharedClientState(e){return new Gd}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Rf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>mf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cf.bind(null,this.syncEngine),await Mh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Kh}createDatastore(e){const t=rh(e.databaseInfo.databaseId),n=function(e){return new th(e)}(e.databaseInfo);return function(e,t,n,r){return new lh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new uh(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>mf(this.syncEngine,e,0)),$d.D()?new $d:new Qd)}createSyncEngine(e,t){return function(e,t,n,r,i,a,s){const o=new of(e,t,n,r,i,a);return s&&(o.La=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=ro(e);Js("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await hh(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ys("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class jf{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Gs.UNAUTHENTICATED,this.clientId=yo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Js("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Js("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ao(io.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new so;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Bh(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Of(e,t){e.asyncQueue.verifyOperationInProgress(),Js("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Ud(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Lf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Uf(e);Js("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Lh(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Lh(t.remoteStore,n))),e._onlineComponents=t}function Mf(e){return"FirebaseError"===e.name?e.code===io.FAILED_PRECONDITION||e.code===io.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Uf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Js("FirestoreClient","Using user provided OfflineComponentProvider");try{await Of(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Mf(n))throw n;Zs("Error using user provided cache. Falling back to memory cache: "+n),await Of(e,new Df)}}else Js("FirestoreClient","Using default OfflineComponentProvider"),await Of(e,new Df);return e._offlineComponents}async function Ff(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Js("FirestoreClient","Using user provided OnlineComponentProvider"),await Lf(e,e._uninitializedComponentsProvider._online)):(Js("FirestoreClient","Using default OnlineComponentProvider"),await Lf(e,new Rf))),e._onlineComponents}function Vf(e){return Ff(e).then((e=>e.syncEngine))}async function Bf(e){const t=await Ff(e),n=t.eventManager;return n.onListen=lf.bind(null,t.syncEngine),n.onUnlisten=hf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ff.bind(null,t.syncEngine),n}function zf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new so;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const a=new Pf({next:a=>{t.enqueueAndForget((()=>Qh(e,s)));const o=a.docs.has(n);!o&&a.fromCache?i.reject(new ao(io.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&a.fromCache&&r&&"server"===r.source?i.reject(new ao(io.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),s=new ef(ic(n.path),a,{includeMetadataChanges:!0,ra:!0});return Gh(e,s)}(await Bf(e),e.asyncQueue,t,n,r))),r.promise}function qf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new so;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const a=new Pf({next:n=>{t.enqueueAndForget((()=>Qh(e,s))),n.fromCache&&"server"===r.source?i.reject(new ao(io.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new ef(n,a,{includeMetadataChanges:!0,ra:!0});return Gh(e,s)}(await Bf(e),e.asyncQueue,t,n,r))),r.promise}function Hf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Wf=new Map;function Kf(e,t,n){if(!n)throw new ao(io.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Gf(e){if(!To.isDocumentKey(e))throw new ao(io.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Qf(e){if(To.isDocumentKey(e))throw new ao(io.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function $f(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":to()}function Xf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ao(io.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$f(e);throw new ao(io.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Jf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ao(io.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ao(io.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ao(io.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ao(io.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ao(io.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ao(io.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ao(io.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ao(io.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new lo;switch(e.type){case"firstParty":return new fo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ao(io.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Wf.get(e);t&&(Js("ComponentProvider","Removing Datastore"),Wf.delete(e),t.terminate())}(this),Promise.resolve()}}class Zf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Zf(this.firestore,e,this._query)}}class ep{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ep(this.firestore,e,this._key)}}class tp extends Zf{constructor(e,t,n){super(e,t,ic(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ep(this.firestore,null,new To(e))}withConverter(e){return new tp(this.firestore,e,this._path)}}function np(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Qe(e),Kf("collection","path",t),e instanceof Yf){const n=So.fromString(t,...r);return Qf(n),new tp(e,null,n)}{if(!(e instanceof ep||e instanceof tp))throw new ao(io.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(So.fromString(t,...r));return Qf(n),new tp(e.firestore,null,n)}}function rp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Qe(e),1===arguments.length&&(t=yo.newId()),Kf("doc","path",t),e instanceof Yf){const n=So.fromString(t,...r);return Gf(n),new ep(e,null,new To(n))}{if(!(e instanceof ep||e instanceof tp))throw new ao(io.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(So.fromString(t,...r));return Gf(n),new ep(e.firestore,e instanceof tp?e.converter:null,new To(n))}}class ip{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new ih(this,"async_queue_retry"),this.hu=()=>{const e=nh();e&&Js("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Jo.Uo()};const e=nh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=nh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new so;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!Mo(e))throw e;Js("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ys("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Vh.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&to()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}class ap extends Yf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ip,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||op(this),this._firestoreClient.terminate()}}function sp(e){return e._firestoreClient||op(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function op(e){var t,n,r;const i=e._freezeSettings(),a=function(e,t,n,r){return new cl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Hf(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new jf(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class lp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lp(tl.fromBase64String(e))}catch(e){throw new ao(io.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new lp(tl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ao(io.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class up{constructor(e){this._methodName=e}}class dp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ao(io.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ao(io.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vo(this._lat,e._lat)||vo(this._long,e._long)}}const hp=/^__.*__$/;class fp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class pp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw to()}}class gp{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Ap(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(mp(this.fu)&&hp.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class yp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||rh(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new gp({fu:e,methodName:t,vu:n,path:xo.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vp(e){const t=e._freezeSettings(),n=rh(e._databaseId);return new yp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wp(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Fu(a.merge||a.mergeFields?2:0,t,n,i);Tp("Data must be an object, but it was:",s,r);const o=kp(r,s);let l,c;if(a.merge)l=new Zo(s.fieldMask),c=s.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const i=Cp(t,r,n);if(!s.contains(i))throw new ao(io.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Dp(e,i)||e.push(i)}l=new Zo(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new fp(new Tl(o),l,c)}class bp extends up{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bp}}function Ep(e,t,n,r){const i=e.Fu(1,t,n);Tp("Data must be an object, but it was:",i,r);const a=[],s=Tl.empty();Ko(r,((e,r)=>{const o=Np(t,e,n);r=Qe(r);const l=i.Su(o);if(r instanceof bp)a.push(o);else{const e=Sp(r,l);null!=e&&(a.push(o),s.set(o,e))}}));const o=new Zo(a);return new pp(s,o,i.fieldTransforms)}function _p(e,t,n,r,i,a){const s=e.Fu(1,t,n),o=[Cp(t,r,n)],l=[i];if(a.length%2!=0)throw new ao(io.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<a.length;h+=2)o.push(Cp(t,a[h])),l.push(a[h+1]);const c=[],u=Tl.empty();for(let h=o.length-1;h>=0;--h)if(!Dp(c,o[h])){const e=o[h];let t=l[h];t=Qe(t);const n=s.Su(e);if(t instanceof bp)c.push(e);else{const r=Sp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Zo(c);return new pp(u,d,s.fieldTransforms)}function Sp(e,t){if(xp(e=Qe(e)))return Tp("Unsupported field value:",t,e),kp(e,t);if(e instanceof up)return function(e,t){if(!mp(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Sp(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Qe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return jc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=bo.fromDate(e);return{timestampValue:Uu(t.serializer,n)}}if(e instanceof bo){const n=new bo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Uu(t.serializer,n)}}if(e instanceof dp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lp)return{bytesValue:Fu(t.serializer,e._byteString)};if(e instanceof ep){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:zu(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat($f(e)))}(e,t)}function kp(e,t){const n={};return Go(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ko(e,((e,r)=>{const i=Sp(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof bo||e instanceof dp||e instanceof lp||e instanceof ep||e instanceof up)}function Tp(e,t,n){if(!xp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=$f(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Cp(e,t,n){if((t=Qe(t))instanceof cp)return t._internalPath;if("string"==typeof t)return Np(e,t);throw Ap("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ip=new RegExp("[~\\*/\\[\\]]");function Np(e,t,n){if(t.search(Ip)>=0)throw Ap("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new cp(...t.split("."))._internalPath}catch(Fn){throw Ap("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ap(e,t,n,r,i){const a=r&&!r.isEmpty(),s=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new ao(io.INVALID_ARGUMENT,o+e+l)}function Dp(e,t){return e.some((e=>e.isEqual(t)))}class Rp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ep(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pp extends Rp{data(){return super.data()}}function jp(e,t){return"string"==typeof t?Np(e,t):t instanceof cp?t._internalPath:t._delegate._internalPath}function Op(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ao(io.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return il(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(al(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw to()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ko(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new dp(il(e.latitude),il(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ol(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const t=rl(e);return new bo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=So.fromString(e);no(ud(n));const r=new ul(n.get(1),n.get(3)),i=new To(n.popFirst(5));return r.isEqual(t)||Ys("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Mp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Up{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fp extends Rp{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Vp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(jp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Vp extends Fp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Bp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Up(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Vp(this._firestore,this._userDataWriter,n.key,n,new Up(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ao(io.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Vp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Up(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Vp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Up(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,a=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:zp(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function zp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return to()}}function qp(e){e=Xf(e,ep);const t=Xf(e.firestore,ap);return zf(sp(t),e._key).then((n=>Xp(t,e,n)))}class Hp extends Lp{constructor(e){super(),this.firestore=e}convertBytes(e){return new lp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ep(this.firestore,null,t)}}function Wp(e){e=Xf(e,Zf);const t=Xf(e.firestore,ap),n=sp(t),r=new Hp(t);return Op(e._query),qf(n,e._query).then((n=>new Bp(t,r,e,n)))}function Kp(e,t,n){e=Xf(e,ep);const r=Xf(e.firestore,ap),i=vp(r);let a;for(var s=arguments.length,o=new Array(s>3?s-3:0),l=3;l<s;l++)o[l-3]=arguments[l];return a="string"==typeof(t=Qe(t))||t instanceof cp?_p(i,"updateDoc",e._key,t,n,o):Ep(i,"updateDoc",e._key,t),$p(r,[a.toMutation(e._key,Qc.exists(!0))])}function Gp(e){return $p(Xf(e.firestore,ap),[new ou(e._key,Qc.none())])}function Qp(e,t){const n=Xf(e.firestore,ap),r=rp(e),i=Mp(e.converter,t);return $p(n,[wp(vp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Qc.exists(!1))]).then((()=>r))}function $p(e,t){return function(e,t){const n=new so;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Af(e);try{const e=await function(e,t){const n=ro(e),r=bo.now(),i=t.reduce(((e,t)=>e.add(t.key)),Nc());let a,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=bc(),l=Nc();return n.ss.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{a=i;const s=[];for(const e of t){const t=eu(e,a.get(e.key).overlayedDocument);null!=t&&s.push(new ru(e.key,t,Cl(t.value.mapValue),Qc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:Sc(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Qo(vo)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Tf(r,e.changes),await Ch(r.remoteStore)}catch(e){const t=Bh(e,"Failed to persist write");n.reject(t)}}(await Vf(e),t,n))),n.promise}(sp(e),t)}function Xp(e,t,n){const r=n.docs.get(t._key),i=new Hp(e);return new Fp(e,i,t._key,r,new Up(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Qs=e}(un),an(new $e("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),s=new ap(new uo(e.getProvider("auth-internal")),new mo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ao(io.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),fn(Ks,"4.6.1",e),fn(Ks,"4.6.1","esm2017")}();const Jp="firebasestorage.googleapis.com",Yp="storageBucket";class Zp extends Pe{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(nm(e),"Firebase Storage: ".concat(t," (").concat(nm(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zp.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var em,tm;function nm(e){return"storage/"+e}function rm(){return new Zp(em.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function im(){return new Zp(em.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function am(){return new Zp(em.CANCELED,"User canceled the upload/download.")}function sm(){return new Zp(em.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function om(e){return new Zp(em.INVALID_ARGUMENT,e)}function lm(){return new Zp(em.APP_DELETED,"The Firebase app was deleted.")}function cm(e,t){return new Zp(em.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function um(e){throw new Zp(em.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(em||(em={}));class dm{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=dm.makeFromUrl(e,t)}catch(i){return new dm(e,"")}if(""===n.path)return n;throw r=e,new Zp(em.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat(t===Jp?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new dm(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Zp(em.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class hm{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function fm(e){return"string"===typeof e||e instanceof String}function pm(e){return mm()&&e instanceof Blob}function mm(){return"undefined"!==typeof Blob}function gm(e,t,n,r){if(r<t)throw om("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw om("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ym(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function vm(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function wm(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(tm||(tm={}));class bm{constructor(e,t,n,r,i,a,s,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=s,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Em(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===tm.NO_ERROR,i=n.getStatus();if(!t||wm(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===tm.ABORT;return void e(!1,new Em(!1,null,t))}const a=-1!==this.successCodes_.indexOf(i);e(!0,new Em(a,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(a){r(a)}else if(null!==i){const e=rm();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?lm():am())}else{r(im())}};this.canceled_?t(0,new Em(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,a=null,s=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){a&&clearTimeout(a)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let a;r<64&&(r*=2),1===o?(o=2,a=0):a=1e3*(r+Math.random()),d(a)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),a=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Em{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function _m(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Sm(){const e=_m();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(mm())return new Blob(n);throw new Zp(em.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function km(e){if("undefined"===typeof atob)throw t="base-64",new Zp(em.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const xm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tm{constructor(e,t){this.data=e,this.contentType=t||null}}function Cm(e,t){switch(e){case xm.RAW:return new Tm(Im(t));case xm.BASE64:case xm.BASE64URL:return new Tm(Nm(e,t));case xm.DATA_URL:return new Tm(function(e){const t=new Am(e);return t.base64?Nm(xm.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw cm(xm.DATA_URL,"Malformed data URL.")}return Im(t)}(t.rest)}(t),new Am(t).contentType)}throw rm()}function Im(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Nm(e,t){switch(e){case xm.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw cm(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case xm.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw cm(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=km(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw cm(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}class Am{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw cm(xm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Dm{constructor(e,t){let n=0,r="";pm(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(pm(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Dm(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Dm(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(mm()){const e=t.map((e=>e instanceof Dm?e.data_:e));return new Dm(Sm.apply(null,e))}{const e=t.map((e=>fm(e)?Cm(xm.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Dm(r,!0)}}uploadData(){return this.data_}}function Rm(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Pm(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function jm(e,t){return t}class Om{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||jm}}let Lm=null;function Mm(){if(Lm)return Lm;const e=[];e.push(new Om("bucket")),e.push(new Om("generation")),e.push(new Om("metageneration")),e.push(new Om("name","fullPath",!0));const t=new Om("name");t.xform=function(e,t){return function(e){return!fm(e)||e.length<2?e:Pm(e)}(t)},e.push(t);const n=new Om("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Om("timeCreated")),e.push(new Om("updated")),e.push(new Om("md5Hash",null,!0)),e.push(new Om("cacheControl",null,!0)),e.push(new Om("contentDisposition",null,!0)),e.push(new Om("contentEncoding",null,!0)),e.push(new Om("contentLanguage",null,!0)),e.push(new Om("contentType",null,!0)),e.push(new Om("metadata","customMetadata",!0)),Lm=e,Lm}function Um(e,t,n){const r={type:"file"},i=n.length;for(let a=0;a<i;a++){const e=n[a];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new dm(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Fm(e,t,n){const r=Rm(t);if(null===r)return null;return Um(e,r,n)}function Vm(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const Bm="prefixes",zm="items";function qm(e,t,n){const r=Rm(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Bm])for(const i of n[Bm]){const n=i.replace(/\/$/,""),a=e._makeStorageReference(new dm(t,n));r.prefixes.push(a)}if(n[zm])for(const i of n[zm]){const n=e._makeStorageReference(new dm(t,i.name));r.items.push(n)}return r}(e,t,r)}class Hm{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wm(e){if(!e)throw rm()}function Km(e,t){return function(n,r){const i=Fm(e,r,t);return Wm(null!==i),i}}function Gm(e,t){return function(n,r){const i=Fm(e,r,t);return Wm(null!==i),function(e,t,n,r){const i=Rm(t);if(null===i)return null;if(!fm(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const s=encodeURIComponent;return a.split(",").map((t=>{const i=e.bucket,a=e.fullPath;return ym("/b/"+s(i)+"/o/"+s(a),n,r)+vm({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Qm(e){return function(t,n){let r;var i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Zp(em.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Zp(em.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Zp(em.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Zp(em.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function $m(e){const t=Qm(e);return function(n,r){let i=t(n,r);var a;return 404===n.getStatus()&&(a=e.path,i=new Zp(em.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Xm(e,t,n,r,i){const a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);const s=ym(t.bucketOnlyServerUrl(),e.host,e._protocol),o=e.maxOperationRetryTime,l=new Hm(s,"GET",function(e,t){return function(n,r){const i=qm(e,t,r);return Wm(null!==i),i}}(e,t.bucket),o);return l.urlParams=a,l.errorHandler=Qm(t),l}function Jm(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Ym(e,t,n,r,i){const a=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+o;const l=Jm(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Vm(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=Dm.getBlob(c,r,u);if(null===d)throw sm();const h={name:l.fullPath},f=ym(a,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Hm(f,"POST",Km(e,n),p);return m.urlParams=h,m.headers=s,m.body=d.uploadData(),m.errorHandler=Qm(t),m}let Zm=null;class eg{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tm.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=tm.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=tm.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw um("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw um("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw um("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw um("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw um("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class tg extends eg{initXhr(){this.xhr_.responseType="text"}}function ng(){return Zm?Zm():new tg}class rg{constructor(e,t){this._service=e,this._location=t instanceof dm?t:dm.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new rg(e,t)}get root(){const e=new dm(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pm(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new dm(this._location.bucket,e);return new rg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Zp(em.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function ig(e,t,n){e._throwIfRoot("uploadBytes");const r=Ym(e.storage,e._location,Mm(),new Dm(t,!0),n);return e.storage.makeRequestWithTokens(r,ng).then((t=>({metadata:t,ref:e})))}function ag(e){const t={prefixes:[],items:[]};return sg(e,t).then((()=>t))}async function sg(e,t,n){const r={pageToken:n},i=await og(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await sg(e,t,i.nextPageToken)}function og(e,t){null!=t&&"number"===typeof t.maxResults&&gm("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=Xm(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,ng)}function lg(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=ym(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Hm(r,"GET",Gm(e,n),i);return a.errorHandler=$m(t),a}(e.storage,e._location,Mm());return e.storage.makeRequestWithTokens(t,ng).then((e=>{if(null===e)throw new Zp(em.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function cg(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=ym(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Hm(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=$m(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,ng)}function ug(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new dm(e._location.bucket,n);return new rg(e.storage,r)}function dg(e,t){if(e instanceof pg){const n=e;if(null==n._bucket)throw new Zp(em.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Yp+"' property when initializing the app?");const r=new rg(n,n._bucket);return null!=t?dg(r,t):r}return void 0!==t?ug(e,t):e}function hg(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof pg)return new rg(e,t);throw om("To use ref(service, url), the first argument must be a Storage instance.")}return dg(e,t)}function fg(e,t){const n=null===t||void 0===t?void 0:t[Yp];return null==n?null:dm.makeFromBucketSpec(n,e)}class pg{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Jp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?dm.makeFromBucketSpec(r,this._host):fg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=dm.makeFromBucketSpec(this._url,e):this._bucket=fg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rg(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new hm(lm());{const a=function(e,t,n,r,i,a){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=vm(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new bm(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then((()=>this._requests.delete(a)),(()=>this._requests.delete(a))),a}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const mg="@firebase/storage",gg="0.12.4",yg="storage";function vg(e,t,n){return ig(e=Qe(e),t,n)}function wg(e){return ag(e=Qe(e))}function bg(e){return lg(e=Qe(e))}function Eg(e){return cg(e=Qe(e))}function _g(e,t){return hg(e=Qe(e),t)}function Sg(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new pg(r,i,a,n,un)}an(new $e(yg,Sg,"PUBLIC").setMultipleInstances(!0)),fn(mg,gg,""),fn(mg,gg,"esm2017");fn("firebase","10.11.1","app");function kg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function xg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tg=xg,Cg=new je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ig=new at("@firebase/auth");function Ng(e){if(Ig.logLevel<=et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ig.error("Auth (".concat(un,"): ").concat(e),...n)}}function Ag(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw jg(e,...n)}function Dg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jg(e,...n)}function Rg(e,t,n){const r=Object.assign(Object.assign({},Tg()),{[t]:n});return new je("auth","Firebase",r).create(t,{appName:e.name})}function Pg(e){return Rg(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Cg.create(e,...n)}function Og(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw jg(t,...r)}}function Lg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ng(t),new Error(t)}function Mg(e,t){e||Lg(t)}function Ug(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Fg(){return"http:"===Vg()||"https:"===Vg()}function Vg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Bg{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mg(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Fg()||Ne()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function zg(e,t){Mg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class qg{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Lg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Lg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Lg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Wg=new Bg(3e4,6e4);function Kg(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Gg(e,t,n,r){return Qg(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const s=Ue(Object.assign({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),qg.fetch()(Xg(e,e.config.apiHost,n,s),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))}))}async function Qg(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hg),t);try{const t=new Yg(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Zg(e,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const t=i.ok?a.errorMessage:a.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Zg(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw Zg(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw Zg(e,"user-disabled",a);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Rg(e,o,s);Ag(e,o)}}catch(i){if(i instanceof Pe)throw i;Ag(e,"network-request-failed",{message:String(i)})}}async function $g(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await Gg(e,t,n,r,i);return"mfaPendingCredential"in a&&Ag(e,"multi-factor-auth-required",{_serverResponse:a}),a}function Xg(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?zg(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Jg(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yg{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Dg(this.auth,"network-request-failed"))),Wg.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zg(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Dg(e,t,r);return i.customData._tokenResponse=n,i}function ey(e){return void 0!==e&&void 0!==e.enterprise}class ty{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Jg(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ny(e,t){return Gg(e,"GET","/v2/recaptchaConfig",Kg(e,t))}async function ry(e,t){return Gg(e,"POST","/v1/accounts:lookup",t)}function iy(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function ay(e){return 1e3*Number(e)}function sy(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ng("JWT malformed, contained fewer than 3 sections"),null;try{const e=we(n);return e?JSON.parse(e):(Ng("Failed to decode base64 JWT payload"),null)}catch(i){return Ng("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function oy(e){const t=sy(e);return Og(t,"internal-error"),Og("undefined"!==typeof t.exp,"internal-error"),Og("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ly(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Pe&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class cy{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class uy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=iy(this.lastLoginAt),this.creationTime=iy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dy(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ly(e,ry(n,{idToken:r}));Og(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const a=i.users[0];e._notifyReloadListener(a);const s=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?hy(a.providerUserInfo):[],o=(l=e.providerData,c=s,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new uy(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function hy(e){return e.map((e=>{var{providerId:t}=e,n=kg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class fy{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Og(e.idToken,"internal-error"),Og("undefined"!==typeof e.idToken,"internal-error"),Og("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Og(0!==e.length,"internal-error");const t=oy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Og(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Qg(e,{},(async()=>{const n=Ue({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=Xg(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",qg.fetch()(a,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,a=new fy;return n&&(Og("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(Og("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),i&&(Og("number"===typeof i,"internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fy,this.toJSON())}_performRefresh(){return Lg("not implemented")}}function py(e,t){Og("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class my{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new uy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ly(this,this.stsTokenManager.getToken(this.auth,e));return Og(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Qe(e),r=await n.getIdToken(t),i=sy(r);Og(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:iy(ay(i.auth_time)),issuedAtTime:iy(ay(i.iat)),expirationTime:iy(ay(i.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Qe(e);await dy(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Og(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new my(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Og(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await dy(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(Pg(this.auth));const e=await this.getIdToken();return await ly(this,async function(e,t){return Gg(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,a,s,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(a=t.photoURL)&&void 0!==a?a:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:E,stsTokenManager:_}=t;Og(v&&_,e,"internal-error");const S=fy.fromJSON(this.name,_);Og("string"===typeof v,e,"internal-error"),py(u,e.name),py(d,e.name),Og("boolean"===typeof w,e,"internal-error"),Og("boolean"===typeof b,e,"internal-error"),py(h,e.name),py(f,e.name),py(p,e.name),py(m,e.name),py(g,e.name),py(y,e.name);const k=new my({uid:v,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(k.providerData=E.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new fy;r.updateFromServerResponse(t);const i=new my({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await dy(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Og(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?hy(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new fy;s.updateFromIdToken(n);const o=new my({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new uy(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const gy=new Map;function yy(e){Mg(e instanceof Function,"Expected a class definition");let t=gy.get(e);return t?(Mg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gy.set(e,t),t)}class vy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vy.type="NONE";const wy=vy;function by(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ey{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=by(this.userKey,r.apiKey,i),this.fullPersistenceKey=by("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?my._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ey(yy(wy),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||yy(wy);const a=by(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(a);if(t){const n=my._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],s&&await i._set(a,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(a)}catch(l){}}))),new Ey(i,e,n)):new Ey(i,e,n)}}function _y(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ty(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Sy(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Iy(t))return"Blackberry";if(Ny(t))return"Webos";if(ky(t))return"Safari";if((t.includes("chrome/")||xy(t))&&!t.includes("edge/"))return"Chrome";if(Cy(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Sy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/firefox\//i.test(e)}function ky(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/crios\//i.test(e)}function Ty(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iemobile/i.test(e)}function Cy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/android/i.test(e)}function Iy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/blackberry/i.test(e)}function Ny(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/webos/i.test(e)}function Ay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Dy(){return function(){const e=Ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ry(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return Ay(e)||Cy(e)||Ny(e)||Iy(e)||/windows phone/i.test(e)||Ty(e)}function Py(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=_y(Ie());break;case"Worker":t="".concat(_y(Ie()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(un,"/").concat(r)}class jy{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Oy{constructor(e){var t,n,r,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,a,s;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(s=o.containsNonAlphanumericCharacter)||void 0===s||s),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ly{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uy(this),this.idTokenSubscription=new Uy(this),this.beforeStateQueue=new jy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yy(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ey.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ry(this,{idToken:e}),n=await my._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(on(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==a||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(a)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Og(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dy(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(Pg(this));const t=e?Qe(e):null;return t&&Og(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Og(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return on(this.app)?Promise.reject(Pg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(Pg(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(yy(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Gg(e,"GET","/v2/passwordPolicy",Kg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Oy(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Gg(e,"POST","/v2/accounts:revokeToken",Kg(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yy(e)||this._popupRedirectResolver;Og(t,this,"argument-error"),this.redirectPersistenceManager=await Ey.create(this,[yy(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Og(s,this,"internal-error"),s.then((()=>{a||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{a=!0,i()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Og(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Py(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ig.logLevel<=et.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ig.warn("Auth (".concat(un,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function My(e){return Qe(e)}class Uy{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Be(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Og(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vy(e){return Fy.loadJS(e)}function By(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class zy{constructor(e){this.type="recaptcha-enterprise",this.auth=My(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ey(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ny(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ty(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ey(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Fy.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Vy(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function qy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new zy(e);let a;try{a=await i.verify(n)}catch(o){a=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Hy(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qy(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await qy(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Wy(e,t,n){const r=My(e);Og(r._canInitEmulator,r,"emulator-config-failed"),Og(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ky(t),{host:s,port:o}=function(e){const t=Ky(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Gy(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gy(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ky(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gy(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Qy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lg("not implemented")}_getIdTokenResponse(e){return Lg("not implemented")}_linkToIdToken(e,t){return Lg("not implemented")}_getReauthenticationResolver(e){return Lg("not implemented")}}async function $y(e,t){return Gg(e,"POST","/v1/accounts:signUp",t)}async function Xy(e,t){return $g(e,"POST","/v1/accounts:signInWithPassword",Kg(e,t))}class Jy extends Qy{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Jy(e,t,"password")}static _fromEmailAndCode(e,t){return new Jy(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Hy(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Xy);case"emailLink":return async function(e,t){return $g(e,"POST","/v1/accounts:signInWithEmailLink",Kg(e,t))}(e,{email:this._email,oobCode:this._password});default:Ag(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Hy(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$y);case"emailLink":return async function(e,t){return $g(e,"POST","/v1/accounts:signInWithEmailLink",Kg(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ag(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Yy(e,t){return $g(e,"POST","/v1/accounts:signInWithIdp",Kg(e,t))}class Zy extends Qy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zy(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ag("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=kg(t,["providerId","signInMethod"]);if(!n||!r)return null;const a=new Zy(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return Yy(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Yy(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yy(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ue(t)}return e}}const ev={USER_NOT_FOUND:"user-not-found"};class tv extends Qy{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new tv({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new tv({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return $g(e,"POST","/v1/accounts:signInWithPhoneNumber",Kg(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await $g(e,"POST","/v1/accounts:signInWithPhoneNumber",Kg(e,t));if(n.temporaryProof)throw Zg(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return $g(e,"POST","/v1/accounts:signInWithPhoneNumber",Kg(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ev)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new tv({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class nv{constructor(e){var t,n,r,i,a,s;const o=Fe(Ve(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Og(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=o.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(s=o.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=Fe(Ve(e)).link,n=t?Fe(Ve(t)).deep_link_id:null,r=Fe(Ve(e)).deep_link_id;return(r?Fe(Ve(r)).link:null)||r||n||t||e}(e);try{return new nv(t)}catch(n){return null}}}class rv{constructor(){this.providerId=rv.PROVIDER_ID}static credential(e,t){return Jy._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=nv.parseLink(t);return Og(n,"argument-error"),Jy._fromEmailAndCode(e,n.code,n.tenantId)}}rv.PROVIDER_ID="password",rv.EMAIL_PASSWORD_SIGN_IN_METHOD="password",rv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class iv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class av extends iv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class sv extends av{constructor(){super("facebook.com")}static credential(e){return Zy._fromParams({providerId:sv.PROVIDER_ID,signInMethod:sv.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sv.credentialFromTaggedObject(e)}static credentialFromError(e){return sv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return sv.credential(t.oauthAccessToken)}catch(n){return null}}}sv.FACEBOOK_SIGN_IN_METHOD="facebook.com",sv.PROVIDER_ID="facebook.com";class ov extends av{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zy._fromParams({providerId:ov.PROVIDER_ID,signInMethod:ov.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ov.credentialFromTaggedObject(e)}static credentialFromError(e){return ov.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ov.credential(n,r)}catch(i){return null}}}ov.GOOGLE_SIGN_IN_METHOD="google.com",ov.PROVIDER_ID="google.com";class lv extends av{constructor(){super("github.com")}static credential(e){return Zy._fromParams({providerId:lv.PROVIDER_ID,signInMethod:lv.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lv.credentialFromTaggedObject(e)}static credentialFromError(e){return lv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return lv.credential(t.oauthAccessToken)}catch(n){return null}}}lv.GITHUB_SIGN_IN_METHOD="github.com",lv.PROVIDER_ID="github.com";class cv extends av{constructor(){super("twitter.com")}static credential(e,t){return Zy._fromParams({providerId:cv.PROVIDER_ID,signInMethod:cv.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cv.credentialFromTaggedObject(e)}static credentialFromError(e){return cv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return cv.credential(n,r)}catch(i){return null}}}async function uv(e,t){return $g(e,"POST","/v1/accounts:signUp",Kg(e,t))}cv.TWITTER_SIGN_IN_METHOD="twitter.com",cv.PROVIDER_ID="twitter.com";class dv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await my._fromIdTokenResponse(e,n,r),a=hv(n);return new dv({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hv(n);return new dv({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class fv extends Pe{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,fv.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new fv(e,t,n,r)}}function pv(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw fv._fromErrorAndOperation(e,n,t,r);throw n}))}async function mv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ly(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return dv._forOperation(e,"link",r)}async function gv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(on(r.app))return Promise.reject(Pg(r));const i="reauthenticate";try{const a=await ly(e,pv(r,i,t,e),n);Og(a.idToken,r,"internal-error");const s=sy(a.idToken);Og(s,r,"internal-error");const{sub:o}=s;return Og(e.uid===o,r,"user-mismatch"),dv._forOperation(e,i,a)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&Ag(r,"user-mismatch"),a}}async function yv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(on(e.app))return Promise.reject(Pg(e));const r="signIn",i=await pv(e,r,t),a=await dv._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function vv(e,t){return yv(My(e),t)}async function wv(e){const t=My(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const bv="__sak";class Ev{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bv,"1"),this.storage.removeItem(bv),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class _v extends Ev{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ie();return ky(e)||Ay(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ry(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Dy()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_v.type="LOCAL";const Sv=_v;class kv extends Ev{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kv.type="SESSION";const xv=kv;class Tv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Tv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!(null===a||void 0===a?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(a).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Cv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Tv.receivers=[];class Iv{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise(((s,o)=>{const l=Cv("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{a&&this.removeMessageHandler(a)}))}}function Nv(){return window}function Av(){return"undefined"!==typeof Nv().WorkerGlobalScope&&"function"===typeof Nv().importScripts}const Dv="firebaseLocalStorageDb",Rv="firebaseLocalStorage",Pv="fbase_key";class jv{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ov(e,t){return e.transaction([Rv],t?"readwrite":"readonly").objectStore(Rv)}function Lv(){const e=indexedDB.open(Dv,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Rv,{keyPath:Pv})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Rv)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Dv);return new jv(e).toPromise()}(),t(await Lv()))}))}))}async function Mv(e,t,n){const r=Ov(e,!0).put({[Pv]:t,value:n});return new jv(r).toPromise()}function Uv(e,t){const n=Ov(e,!0).delete(t);return new jv(n).toPromise()}class Fv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Lv()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Av()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tv._getInstance(Av()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Iv(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lv();return await Mv(e,bv,"1"),await Uv(e,bv),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Mv(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ov(e,!1).get(t),r=await new jv(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Uv(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ov(e,!1).getAll();return new jv(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Fv.type="LOCAL";const Vv=Fv;By("rcb"),new Bg(3e4,6e4);const Bv="recaptcha";async function zv(e,t,n){var r;const i=await n.verify();try{let a;if(Og("string"===typeof i,e,"argument-error"),Og(n.type===Bv,e,"argument-error"),a="string"===typeof t?{phoneNumber:t}:t,"session"in a){const t=a.session;if("phoneNumber"in a){Og("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Gg(e,"POST","/v2/accounts/mfaEnrollment:start",Kg(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Og("signin"===t.type,e,"internal-error");const n=(null===(r=a.multiFactorHint)||void 0===r?void 0:r.uid)||a.multiFactorUid;Og(n,e,"missing-multi-factor-info");const s=await function(e,t){return Gg(e,"POST","/v2/accounts/mfaSignIn:start",Kg(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Gg(e,"POST","/v1/accounts:sendVerificationCode",Kg(e,t))}(e,{phoneNumber:a.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class qv{constructor(e){this.providerId=qv.PROVIDER_ID,this.auth=My(e)}verifyPhoneNumber(e,t){return zv(this.auth,e,Qe(t))}static credential(e,t){return tv._fromVerification(e,t)}static credentialFromResult(e){const t=e;return qv.credentialFromTaggedObject(t)}static credentialFromError(e){return qv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?tv._fromTokenResponse(n,r):null}}function Hv(e,t){return t?yy(t):(Og(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}qv.PROVIDER_ID="phone",qv.PHONE_SIGN_IN_METHOD="phone";class Wv extends Qy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yy(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Kv(e){return yv(e.auth,new Wv(e),e.bypassAuthState)}function Gv(e){const{auth:t,user:n}=e;return Og(n,t,"internal-error"),gv(n,new Wv(e),e.bypassAuthState)}async function Qv(e){const{auth:t,user:n}=e;return Og(n,t,"internal-error"),mv(n,new Wv(e),e.bypassAuthState)}class $v{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:s}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kv;case"linkViaPopup":case"linkViaRedirect":return Qv;case"reauthViaPopup":case"reauthViaRedirect":return Gv;default:Ag(this.auth,"internal-error")}}resolve(e){Mg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xv=new Bg(2e3,1e4);class Jv extends $v{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Jv.currentPopupAction&&Jv.currentPopupAction.cancel(),Jv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Og(e,this.auth,"internal-error"),e}async onExecution(){Mg(1===this.filter.length,"Popup operations only handle one event");const e=Cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Dg(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Dg(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jv.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Dg(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Xv.get())};e()}}Jv.currentPopupAction=null;const Yv="pendingRedirect",Zv=new Map;class ew extends $v{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Zv.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=rw(t),r=nw(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Zv.set(this.auth._key(),e)}return this.bypassAuthState||Zv.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function tw(e,t){Zv.set(e._key(),t)}function nw(e){return yy(e._redirectPersistence)}function rw(e){return by(Yv,e.config.apiKey,e.name)}async function iw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(on(e.app))return Promise.reject(Pg(e));const r=My(e),i=Hv(r,t),a=new ew(r,i,n),s=await a.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class aw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ow(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ow(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Dg(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sw(e))}saveEventToCache(e){this.cachedEventUids.add(sw(e)),this.lastProcessedEventTime=Date.now()}}function sw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ow(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const lw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cw=/^https?/;async function uw(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Gg(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(dw(r))return}catch(n){}Ag(e,"unauthorized-domain")}function dw(e){const t=Ug(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!cw.test(n))return!1;if(lw.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hw=new Bg(3e4,6e4);function fw(){const e=Nv().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function pw(e){return new Promise(((t,n)=>{var r,i,a;function s(){fw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{fw(),n(Dg(e,"network-request-failed"))},timeout:hw.get()})}if(null===(i=null===(r=Nv().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Nv().gapi)||void 0===a?void 0:a.load)){const t=By("iframefcb");return Nv()[t]=()=>{gapi.load?s():n(Dg(e,"network-request-failed"))},Vy("".concat(Fy.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw mw=null,e}))}let mw=null;const gw=new Bg(5e3,15e3),yw="__/auth/iframe",vw="emulator/auth/iframe",ww={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ew(e){const t=e.config;Og(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zg(t,vw):"https://".concat(e.config.authDomain,"/").concat(yw),r={apiKey:t.apiKey,appName:e.name,v:un},i=bw.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ue(r).slice(1))}async function _w(e){const t=await function(e){return mw=mw||pw(e),mw}(e),n=Nv().gapi;return Og(n,e,"internal-error"),t.open({where:document.body,url:Ew(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ww,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Dg(e,"network-request-failed"),a=Nv().setTimeout((()=>{r(i)}),gw.get());function s(){Nv().clearTimeout(a),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const Sw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function xw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Sw),{width:r.toString(),height:i.toString(),top:a,left:s}),c=Ie().toLowerCase();n&&(o=xy(c)?"_blank":n),Sy(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Ay(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new kw(null);const d=window.open(t||"",o,u);Og(d,e,"popup-blocked");try{d.focus()}catch(h){}return new kw(d)}const Tw="__/auth/handler",Cw="emulator/auth/handler",Iw=encodeURIComponent("fac");async function Nw(e,t,n,r,i,a){Og(e.config.authDomain,e,"auth-domain-config-required"),Og(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:un,eventId:i};if(t instanceof iv){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))s[e]=t}if(t instanceof av){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Iw,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Tw);return zg(t,Cw)}(e),"?").concat(Ue(o).slice(1)).concat(c)}const Aw="webStorageSupport";const Dw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xv,this._completeRedirectFn=iw,this._overrideRedirectResult=tw}async _openPopup(e,t,n,r){var i;Mg(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return xw(e,await Nw(e,t,n,Ug(),r),Cv())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Nv().location.href=e}(await Nw(e,t,n,Ug(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Mg(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await _w(e),n=new aw(e);return t.register("authEvent",(t=>{Og(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Aw,{type:Aw},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Aw];void 0!==i&&t(!!i),Ag(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uw(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ry()||ky()||Ay()}};var Rw="@firebase/auth",Pw="1.7.2";class jw{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Og(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ow=xe("authIdTokenMaxAge")||300;let Lw=null;function Mw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();const t=sn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=sn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Le(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ag(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Dw,persistence:[Vv,Sv,xv]}),r=xe("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ow)return;const r=null===t||void 0===t?void 0:t.token;Lw!==r&&(Lw=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Qe(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Qe(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const a=_e("auth");return a&&Wy(n,"http://".concat(a)),n}var Uw;!function(e){Fy=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Dg("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Uw="Browser",an(new $e("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;Og(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:Uw,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Py(Uw)},c=new Ly(r,i,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yy);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),an(new $e("auth-internal",(e=>(e=>new jw(e))(My(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),fn(Rw,Pw,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Uw)),fn(Rw,Pw,"esm2017");const Fw="@firebase/installations",Vw="0.6.6",Bw=1e4,zw="w:".concat(Vw),qw="FIS_v2",Hw="https://firebaseinstallations.googleapis.com/v1",Ww=36e5,Kw=new je("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Gw(e){return e instanceof Pe&&e.code.includes("request-failed")}function Qw(e){let{projectId:t}=e;return"".concat(Hw,"/projects/").concat(t,"/installations")}function $w(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Xw(e,t){const n=(await t.json()).error;return Kw.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Jw(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Yw(e,t){let{refreshToken:n}=t;const r=Jw(e);return r.append("Authorization",function(e){return"".concat(qw," ").concat(e)}(n)),r}async function Zw(e){const t=await e();return t.status>=500&&t.status<600?e():t}function eb(e){return new Promise((t=>{setTimeout(t,e)}))}const tb=/^[cdef][\w-]{21}$/,nb="";function rb(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return tb.test(t)?t:nb}catch(e){return nb}}function ib(e){return"".concat(e.appName,"!").concat(e.appId)}const ab=new Map;function sb(e,t){const n=ib(e);ob(n,t),function(e,t){const n=cb();n&&n.postMessage({key:e,fid:t});ub()}(n,t)}function ob(e,t){const n=ab.get(e);if(n)for(const r of n)r(t)}let lb=null;function cb(){return!lb&&"BroadcastChannel"in self&&(lb=new BroadcastChannel("[Firebase] FID Change"),lb.onmessage=e=>{ob(e.data.key,e.data.fid)}),lb}function ub(){0===ab.size&&lb&&(lb.close(),lb=null)}const db="firebase-installations-database",hb=1,fb="firebase-installations-store";let pb=null;function mb(){return pb||(pb=wt(db,hb,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(fb)}})),pb}async function gb(e,t){const n=ib(e),r=(await mb()).transaction(fb,"readwrite"),i=r.objectStore(fb),a=await i.get(n);return await i.put(t,n),await r.done,a&&a.fid===t.fid||sb(e,t.fid),t}async function yb(e){const t=ib(e),n=(await mb()).transaction(fb,"readwrite");await n.objectStore(fb).delete(t),await n.done}async function vb(e,t){const n=ib(e),r=(await mb()).transaction(fb,"readwrite"),i=r.objectStore(fb),a=await i.get(n),s=t(a);return void 0===s?await i.delete(n):await i.put(s,n),await r.done,!s||a&&a.fid===s.fid||sb(e,s.fid),s}async function wb(e){let t;const n=await vb(e.appConfig,(n=>{const r=function(e){const t=e||{fid:rb(),registrationStatus:0};return _b(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Kw.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const a=Qw(n),s=Jw(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const l={fid:i,authVersion:qw,appId:n.appId,sdkVersion:zw},c={method:"POST",headers:s,body:JSON.stringify(l)},u=await Zw((()=>fetch(a,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:$w(e.authToken)}}throw await Xw("Create Installation",u)}(e,t);return gb(e.appConfig,n)}catch(n){throw Gw(n)&&409===n.customData.serverCode?await yb(e.appConfig):await gb(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:bb(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===nb?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function bb(e){let t=await Eb(e.appConfig);for(;1===t.registrationStatus;)await eb(100),t=await Eb(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await wb(e);return n||t}return t}function Eb(e){return vb(e,(e=>{if(!e)throw Kw.create("installation-not-found");return _b(e)}))}function _b(e){return 1===(t=e).registrationStatus&&t.registrationTime+Bw<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Sb(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(Qw(e),"/").concat(n,"/authTokens:generate")}(n,t),a=Yw(n,t),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={installation:{sdkVersion:zw,appId:n.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},c=await Zw((()=>fetch(i,l)));if(c.ok){return $w(await c.json())}throw await Xw("Generate Auth Token",c)}async function kb(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await vb(e.appConfig,(r=>{if(!Tb(r))throw Kw.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Ww}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await xb(e.appConfig);for(;1===n.authToken.requestStatus;)await eb(100),n=await xb(e.appConfig);const r=n.authToken;return 0===r.requestStatus?kb(e,t):r}(e,n),r;{if(!navigator.onLine)throw Kw.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Sb(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await gb(e.appConfig,r),n}catch(n){if(!Gw(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await gb(e.appConfig,n)}else await yb(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function xb(e){return vb(e,(e=>{if(!Tb(e))throw Kw.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Bw<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function Tb(e){return void 0!==e&&2===e.registrationStatus}async function Cb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await wb(e);t&&await t}(n);return(await kb(n,t)).token}function Ib(e){return Kw.create("missing-app-config-values",{valueName:e})}const Nb="installations",Ab=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ib("App Configuration");if(!e.name)throw Ib("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ib(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:sn(t,"heartbeat"),_delete:()=>Promise.resolve()}},Db=e=>{const t=sn(e.getProvider("app").getImmediate(),Nb).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await wb(t);return r?r.catch(console.error):kb(t).catch(console.error),n.fid}(t),getToken:e=>Cb(t,e)}};an(new $e(Nb,Ab,"PUBLIC")),an(new $e("installations-internal",Db,"PRIVATE")),fn(Fw,Vw),fn(Fw,Vw,"esm2017");const Rb="analytics",Pb="firebase_id",jb="origin",Ob=6e4,Lb="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mb="https://www.googletagmanager.com/gtag/js",Ub=new at("@firebase/analytics"),Fb=new je("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Vb(e){if(!e.startsWith(Mb)){const t=Fb.create("invalid-gtag-resource",{gtagURL:e});return Ub.warn(t.message),""}return e}function Bb(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function zb(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Vb}),r=document.createElement("script"),i="".concat(Mb,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function qb(e,t,n,r){return async function(i){try{for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let a=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Bb(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){a=[];break}a.push(i)}}0===a.length&&(a=Object.values(t)),await Promise.all(a),e("event",r,i||{})}catch(a){Ub.error(a)}}(e,t,n,r,i)}else if("config"===i){const[i,a]=s;await async function(e,t,n,r,i,a){const s=r[i];try{if(s)await t[s];else{const e=(await Bb(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(o){Ub.error(o)}e("config",i,a)}(e,t,n,r,i,a)}else if("consent"===i){const[t]=s;e("consent","update",t)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(l){Ub.error(l)}}}const Hb=30;const Wb=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Kb(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Gb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wb,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:a}=e.options;if(!r)throw Fb.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Fb.create("no-api-key")}const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new $b;return setTimeout((async()=>{o.abort()}),void 0!==n?n:Ob),Qb({appId:r,apiKey:i,measurementId:a},s,o,t)}async function Qb(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wb;var s;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(a),r(Fb.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(c){if(l)return Ub.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===c||void 0===c?void 0:c.message,"]")),{appId:o,measurementId:l};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Kb(r)},a=Lb.replace("{app-id}",n),s=await fetch(a,i);if(200!==s.status&&304!==s.status){let e="";try{const n=await s.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw Fb.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}(e);return a.deleteThrottleMetadata(o),t}catch(c){const t=c;if(!function(e){if(!(e instanceof Pe)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(a.deleteThrottleMetadata(o),l)return Ub.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:o,measurementId:l};throw c}const r=503===Number(null===(s=null===t||void 0===t?void 0:t.customData)||void 0===s?void 0:s.httpStatus)?Ge(i,a.intervalMillis,Hb):Ge(i,a.intervalMillis),u={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return a.setThrottleMetadata(o,u),Ub.debug("Calling attemptFetch again in ".concat(r," millis")),Qb(e,u,n,a)}}class $b{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Xb,Jb;function Yb(e){Jb=e}function Zb(e){Xb=e}async function eE(e,t,n,r,i,a,s){var o;const l=Gb(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ub.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>Ub.error(e))),t.push(l);const c=async function(){if(!De())return Ub.warn(Fb.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Re()}catch(e){return Ub.warn(Fb.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Mb)&&n.src.includes(e))return n;return null})(a)||zb(a,u.measurementId),Jb&&(i("consent","default",Jb),Yb(void 0)),i("js",new Date);const h=null!==(o=null===s||void 0===s?void 0:s.config)&&void 0!==o?o:{};return h[jb]="firebase",h.update=!0,null!=d&&(h[Pb]=d),i("config",u.measurementId,h),Xb&&(i("set",Xb),Zb(void 0)),u.measurementId}class tE{constructor(e){this.app=e}_delete(){return delete nE[this.app.options.appId],Promise.resolve()}}let nE={},rE=[];const iE={};let aE,sE,oE="dataLayer",lE="gtag",cE=!1;function uE(){const e=[];if(Ne()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=Fb.create("invalid-analytics-context",{errorInfo:t});Ub.warn(n.message)}}function dE(e,t,n){uE();const r=e.options.appId;if(!r)throw Fb.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Fb.create("no-api-key");Ub.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=nE[r])throw Fb.create("already-exists",{id:r});if(!cE){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(oE);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=qb(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}(nE,rE,iE,oE,lE);sE=e,aE=t,cE=!0}nE[r]=eE(e,rE,iE,t,aE,oE,n);return new tE(e)}function hE(e,t,n,r){e=Qe(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(sE,nE[e.app.options.appId],t,n,r).catch((e=>Ub.error(e)))}const fE="@firebase/analytics",pE="0.10.2";an(new $e(Rb,((e,t)=>{let{options:n}=t;return dE(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),an(new $e("analytics-internal",(function(e){try{const t=e.getProvider(Rb).getImmediate();return{logEvent:(e,n,r)=>hE(t,e,n,r)}}catch(t){throw Fb.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),fn(fE,pE),fn(fE,pE,"esm2017");const mE=dn({apiKey:"AIzaSyC5HAywpfQ6XI6GAcXZpZuB-Nw_75prY_o",authDomain:"dmpage-72e3e.firebaseapp.com",projectId:"dmpage-72e3e",storageBucket:"dmpage-72e3e.appspot.com",messagingSenderId:"200086784221",appId:"1:200086784221:web:429feb8639d04330967334",measurementId:"G-5G4SD327J0"}),gE=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();e=Qe(e);const t=sn(e,Rb);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=sn(e,Rb);if(n.isInitialized()){const e=n.getImmediate();if(Le(t,n.getOptions()))return e;throw Fb.create("already-initialized")}const r=n.initialize({options:t})}(e)}(mE),Mw(mE)),yE=function(e,t){const n="string"==typeof e?e:t||"(default)",r=sn("object"==typeof e?e:hn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Se("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const a=(e=Xf(e,Yf))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==s&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Gs.MOCK_USER;else{t=Ce(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new ao(io.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Gs(a)}e._authCredentials=new co(new oo(t,n))}}(r,...e)}return r}(mE),vE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn(),t=arguments.length>1?arguments[1]:void 0;e=Qe(e);const n=sn(e,yg).getImmediate({identifier:t}),r=Se("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Ce(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(mE);var wE=n(579);const bE=e=>{let{user:n,onToggleDarkMode:r}=e;const[i,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(!1),h=J();return(0,wE.jsxs)("div",{className:"header",children:[n?(0,wE.jsxs)(wE.Fragment,{children:[(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{try{await function(e){return Qe(e).signOut()}(gE),h("/corals/index")}catch(l){c("Sign out error: "+l.message)}},children:"Logout"}),(0,wE.jsx)("span",{children:n.email})]}):(0,wE.jsxs)(wE.Fragment,{children:[(0,wE.jsxs)("label",{children:["Email:",(0,wE.jsx)("input",{type:"email",value:i,onChange:e=>a(e.target.value),placeholder:"Email","aria-label":"Email"})]}),(0,wE.jsxs)("label",{children:["Password:",(0,wE.jsx)("input",{type:"password",value:s,onChange:e=>o(e.target.value),placeholder:"Password","aria-label":"Password"})]}),(0,wE.jsx)("button",{className:"page-btn",onClick:async()=>{d(!0),c("");try{await function(e,t,n){return on(e.app)?Promise.reject(Pg(e)):vv(Qe(e),rv.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wv(e),t}))}(gE,i,s),h("/corals/homepage")}catch(l){c("Login error: "+l.message),d(!1)}},disabled:u,children:u?"Logging in...":"Login"}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>h("/corals/signup"),children:"Sign Up"})]}),l&&(0,wE.jsx)("p",{style:{color:"red"},children:l})]})},EE=e=>{let{isLoginPage:t,darkMode:n}=e;const r=t?"footer-login":"footer";return(0,wE.jsx)("div",{className:r})};var _E,SE=new Uint8Array(16);function kE(){if(!_E&&!(_E="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _E(SE)}const xE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const TE=function(e){return"string"===typeof e&&xE.test(e)};for(var CE=[],IE=0;IE<256;++IE)CE.push((IE+256).toString(16).substr(1));const NE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(CE[e[t+0]]+CE[e[t+1]]+CE[e[t+2]]+CE[e[t+3]]+"-"+CE[e[t+4]]+CE[e[t+5]]+"-"+CE[e[t+6]]+CE[e[t+7]]+"-"+CE[e[t+8]]+CE[e[t+9]]+"-"+CE[e[t+10]]+CE[e[t+11]]+CE[e[t+12]]+CE[e[t+13]]+CE[e[t+14]]+CE[e[t+15]]).toLowerCase();if(!TE(n))throw TypeError("Stringified UUID is invalid");return n};const AE=function(e,t,n){var r=(e=e||{}).random||(e.rng||kE)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return NE(r)},DE=n.p+"static/media/Acro.7054993ccc5d2790d3da.jpeg",RE=n.p+"static/media/Chalice.8b05914ccd8b1fec61f9.jpeg",PE=n.p+"static/media/Monti.7943b8ffa3274378ff18.jpeg",jE=n.p+"static/media/Favia.4470ae39a34b090d2da0.jpeg",OE=n.p+"static/media/Mushroom.fda2cda8e89f635b7be6.jpeg",LE=n.p+"static/media/Scoly.7237e4305c8379c8e07f.jpeg",ME=n.p+"static/media/Zoas.415a47a7e6f21b8d7d6b.jpeg",UE=n.p+"static/media/FishTank.9e2b8e86a8cd3de02d5f.jpeg",FE=n.p+"static/media/NPSCoral.85c767d15e47469ea7bf.jpeg",VE=n.p+"static/media/AquascapeIdeas.520135cd8854386dd9b2.jpeg",BE=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=_g(vE,"Acropora");try{const t=await function(e,t){return og(e=Qe(e),t)}(e,{maxResults:7}),r=await Promise.all(t.items.map((e=>bg(e))));n((e=>[...e,...r]))}catch(t){console.error("Error fetching images:",t)}})()}),[]);const a=e=>{e.stopPropagation(),i(null)};return(0,t.useEffect)((()=>{console.log("Selected image updated to:",r)}),[r]),(0,wE.jsx)(wE.Fragment,{children:(0,wE.jsxs)("div",{className:"coral-imagescroll-container",children:[(0,wE.jsx)("div",{className:"box-scroll-images",style:{overflowX:"auto",whiteSpace:"nowrap"},children:e.map(((e,t)=>(0,wE.jsx)("div",{className:"scroll-image-container",children:(0,wE.jsx)("img",{src:e,alt:"image_".concat(t),style:{width:"150px",height:"auto",display:"inline-block",marginRight:"10px"},onClick:()=>(e=>{console.log("Attempting to open modal with image URL:",e),i(e)})(e)})},t)))}),r&&(0,wE.jsx)("div",{className:"modal-box",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",children:[(0,wE.jsx)("img",{className:"modal-img",src:r,alt:"Modal"}),(0,wE.jsx)("button",{className:"modal-button",onClick:a,children:"Close"})]})})]})})},zE=e=>{let{darkMode:n}=e;const r=[{src:DE,label:"acro",route:"acro"},{src:RE,label:"chalice",route:"chalice"},{src:PE,label:"monti",route:"monti"},{src:jE,label:"favia",route:"favia"},{src:OE,label:"mushroom",route:"mushroom"},{src:LE,label:"scoly",route:"scoly"},{src:ME,label:"zoas",route:"zoas"},{src:UE,label:"fishtank",route:"fishtank"},{src:FE,label:"nps",route:"nps"},{src:VE,label:"aquascape",route:"aquascape"}],i=n?"coral-main-page dark-mode":"coral-main-page",a=n?"coral-homepage-images-list dark-mode":"coral-homepage-images-list",s=J(),[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{d()}),[]);const d=async()=>{const e=_g(vE,"Acropora");try{const t=await wg(e),n=t.items.map((e=>bg(e))),r=await Promise.all(n);l((e=>[...e,...r])),u(t.nextPageToken)}catch(t){console.error("Error fetching images:",t)}},[h,f]=(0,t.useState)(null),[p,m]=(0,t.useState)([]),g=_g(vE,"images/");return(0,t.useEffect)((()=>{wg(g).then((e=>{const t=e.items.map((e=>bg(e)));Promise.all(t).then((e=>{m(e)}))}))}),[g]),(0,wE.jsxs)(wE.Fragment,{children:[(0,wE.jsx)("div",{className:"coral-homepage-imagescroll-container",children:(0,wE.jsx)(BE,{})}),(0,wE.jsx)("div",{className:i,children:(0,wE.jsx)("div",{className:a,children:r.map(((e,t)=>(0,wE.jsxs)("div",{className:"coral-homepage-image-container",onClick:()=>{return t=e.route,console.log("Attempting to navigate to:","/corals/".concat(t)),void s("/corals/".concat(t));var t},children:[(0,wE.jsx)("img",{src:e.src,className:"coral-homepage-img-grid"}),(0,wE.jsx)("span",{className:"coral-home-img-label",children:e.label})]},t)))})})]})},qE=()=>{const e=Mw(),[n,r]=(0,t.useState)(""),[i,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)(""),p=np(yE,"users");console.log(e.currentUser);return(0,t.useEffect)((()=>{(async()=>{const e=await Wp(p);d(e.docs.map((e=>({...e.data(),id:e.id}))))})()}),[p]),(0,wE.jsxs)(wE.Fragment,{children:[(0,wE.jsx)("div",{children:"Sign up"}),(0,wE.jsxs)("div",{children:[(0,wE.jsx)("input",{placeholder:"First Name:",onChange:e=>r(e.target.value)}),(0,wE.jsx)("input",{placeholder:"Last Name:",onChange:e=>a(e.target.value)}),(0,wE.jsx)("input",{placeholder:"Email:",onChange:e=>o(e.target.value)}),(0,wE.jsx)("input",{placeholder:"Password:",type:"password",onChange:e=>c(e.target.value)}),(0,wE.jsx)("button",{onClick:async()=>{s&&l?(f(""),async function(e,t,n){if(on(e.app))return Promise.reject(Pg(e));const r=My(e),i=Hy(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uv),a=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wv(e),t})),s=await dv._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(s.user),s}(e,s,l).then((e=>{const t=e.user;Qp(p,{uid:t.uid,firstName:n,lastName:i,email:s})})).catch((e=>{f(e.message)}))):f("Email and password are required")},children:"Create User"}),h&&(0,wE.jsx)("p",{style:{color:"red"},children:h})]}),u.map((e=>(0,wE.jsxs)("div",{children:[(0,wE.jsxs)("h1",{children:["First Name: ",e.firstName]}),(0,wE.jsxs)("h1",{children:["Last Name: ",e.lastName]}),(0,wE.jsxs)("h1",{children:["Email: ",e.email]}),(0,wE.jsx)("button",{onClick:()=>(async e=>{const t=rp(yE,"users",e);await Gp(t)})(e.id),children:"Delete User"})]},e.id)))]})},HE=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageAquascapeType:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageAquascapeType:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"chalice"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"AquascapeTypeInput",name:"aquascapeType",className:"coral-name-input",placeholder:"Aquascape Type...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Aquascape Ideas/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"chalice"),{url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload Image"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"chalice",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.aquascapeType);let r="";t.lastEdited&&t.lastEdited.toDate instanceof Function&&(r=t.lastEdited.toDate().toLocaleString()),p({editedBy:t.lastEditedBy,lastEdited:r}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Aquascape Ideas/")&&(t=t.replace("Aquascape Ideas/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Aquascape Ideas/".concat(t));if(await Eg(a),!n){const t=rp(yE,"chalice",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,aquascapeType:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Aquascape Type "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"chalice",e);await Kp(o,{description:t,aquascapeType:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,aquascapeType:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"chalice",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.aquascapeType)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},WE=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageAquascapeType:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageAquascapeType:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"montipora"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"AquascapeTypeInput",name:"aquascapeType",className:"coral-name-input",placeholder:"Aquascape Type...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Aquascape Ideas/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"montipora"),{url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload Image"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"montipora",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.aquascapeType);let r="";t.lastEdited&&t.lastEdited.toDate instanceof Function&&(r=t.lastEdited.toDate().toLocaleString()),p({editedBy:t.lastEditedBy,lastEdited:r}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Aquascape Ideas/")&&(t=t.replace("Aquascape Ideas/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Aquascape Ideas/".concat(t));if(await Eg(a),!n){const t=rp(yE,"montipora",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,aquascapeType:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Aquascape Type "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"montipora",e);await Kp(o,{description:t,aquascapeType:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,aquascapeType:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"montipora",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.aquascapeType)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},KE=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageMushroomName:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Mushroom Name:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageMushroomName:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Mushroom Name:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"mushrooms"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"MushroomNameInput",name:"mushroomName",className:"coral-name-input",placeholder:"Mushroom Name...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Mushrooms/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"mushrooms"),{url:s,imageName:t,description:E,mushroomName:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,mushroomName:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"mushrooms",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.mushroomName);let r="";t.lastEdited&&t.lastEdited.toDate instanceof Function&&(r=t.lastEdited.toDate().toLocaleString()),p({editedBy:t.lastEditedBy,lastEdited:r}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Mushrooms/")&&(t=t.replace("Mushrooms/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Mushrooms/".concat(t));if(await Eg(a),!n){const t=rp(yE,"mushrooms",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageMushroomName:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageMushroomName:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,mushroomName:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Mushroom Name "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"mushrooms",e);await Kp(o,{description:t,mushroomName:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,mushroomName:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"mushrooms",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.mushroomName)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},GE=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageAquascapeType:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageAquascapeType:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"nps corals"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"AquascapeTypeInput",name:"aquascapeType",className:"coral-name-input",placeholder:"Aquascape Type...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Aquascape Ideas/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"nps corals"),{url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload Image"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"nps corals",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.aquascapeType);let r="";t.lastEdited&&t.lastEdited.toDate instanceof Function&&(r=t.lastEdited.toDate().toLocaleString()),p({editedBy:t.lastEditedBy,lastEdited:r}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Aquascape Ideas/")&&(t=t.replace("Aquascape Ideas/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Aquascape Ideas/".concat(t));if(await Eg(a),!n){const t=rp(yE,"nps corals",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,aquascapeType:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Aquascape Type "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"nps corals",e);await Kp(o,{description:t,aquascapeType:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,aquascapeType:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"nps corals",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.aquascapeType)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},QE=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageAquascapeType:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageAquascapeType:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"scolymia"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"AquascapeTypeInput",name:"aquascapeType",className:"coral-name-input",placeholder:"Aquascape Type...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Aquascape Ideas/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"scolymia"),{url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload Image"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"scolymia",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.aquascapeType);let r="";t.lastEdited&&t.lastEdited.toDate instanceof Function&&(r=t.lastEdited.toDate().toLocaleString()),p({editedBy:t.lastEditedBy,lastEdited:r}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Aquascape Ideas/")&&(t=t.replace("Aquascape Ideas/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Aquascape Ideas/".concat(t));if(await Eg(a),!n){const t=rp(yE,"scolymia",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,aquascapeType:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Aquascape Type "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"scolymia",e);await Kp(o,{description:t,aquascapeType:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,aquascapeType:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"scolymia",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.aquascapeType)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},$E=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageAquascapeType:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageAquascapeType:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"zoas palys"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"AquascapeTypeInput",name:"aquascapeType",className:"coral-name-input",placeholder:"Aquascape Type...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Aquascape Ideas/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"zoas palys"),{url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload Image"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"zoas palys",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.aquascapeType);let r="";t.lastEdited&&t.lastEdited.toDate instanceof Function&&(r=t.lastEdited.toDate().toLocaleString()),p({editedBy:t.lastEditedBy,lastEdited:r}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Aquascape Ideas/")&&(t=t.replace("Aquascape Ideas/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Aquascape Ideas/".concat(t));if(await Eg(a),!n){const t=rp(yE,"zoas palys",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,aquascapeType:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Aquascape Type "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"zoas palys",e);await Kp(o,{description:t,aquascapeType:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,aquascapeType:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"zoas palys",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.aquascapeType)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},XE=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageCoralName:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Coral Name:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageCoralName:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Coral Name:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"corals"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"coralNameInput",name:"coralName",className:"coral-name-input",placeholder:"Coral Name...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Acropora/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"corals"),{url:s,imageName:t,description:E,coralName:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,coralName:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"corals",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.coralName),p({editedBy:t.lastEditedBy,lastEdited:t.lastEdited.toDate().toLocaleString()}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Acropora/")&&(t=t.replace("Acropora/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Acropora/".concat(t));if(await Eg(a),!n){const t=rp(yE,"corals",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageCoralName:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageCoralName:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,coralName:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Coral Name "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"corals",e);await Kp(o,{description:t,coralName:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,coralName:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"corals",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.coralName)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},JE=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageAquascapeType:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageAquascapeType:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"favia"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"AquascapeTypeInput",name:"aquascapeType",className:"coral-name-input",placeholder:"Aquascape Type...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Aquascape Ideas/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"favia"),{url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload Image"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"favia",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.aquascapeType);let r="";t.lastEdited&&t.lastEdited.toDate instanceof Function&&(r=t.lastEdited.toDate().toLocaleString()),p({editedBy:t.lastEditedBy,lastEdited:r}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Aquascape Ideas/")&&(t=t.replace("Aquascape Ideas/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Aquascape Ideas/".concat(t));if(await Eg(a),!n){const t=rp(yE,"favia",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,aquascapeType:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Aquascape Type "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"favia",e);await Kp(o,{description:t,aquascapeType:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,aquascapeType:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"favia",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.aquascapeType)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},YE=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageAquascapeType:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageAquascapeType:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"aquascapes"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"AquascapeTypeInput",name:"aquascapeType",className:"coral-name-input",placeholder:"Aquascape Type...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Aquascape Ideas/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"aquascapes"),{url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"aquascapes",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.aquascapeType);let r="";t.lastEdited&&t.lastEdited.toDate instanceof Function&&(r=t.lastEdited.toDate().toLocaleString()),p({editedBy:t.lastEditedBy,lastEdited:r}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Aquascape Ideas/")&&(t=t.replace("Aquascape Ideas/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Aquascape Ideas/".concat(t));if(await Eg(a),!n){const t=rp(yE,"aquascapes",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,aquascapeType:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Aquascape Type "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"aquascapes",e);await Kp(o,{description:t,aquascapeType:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,aquascapeType:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"aquascapes",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.aquascapeType)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},ZE=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(""),[y,v]=(0,t.useState)({}),[w,b]=(0,t.useState)(null),[E,_]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[x,T]=(0,t.useState)(""),[C,I]=(0,t.useState)(null),[N,A]=(0,t.useState)(1),D=12*N,R=D-12,P=r.slice(R,D),j=r.length,O=Math.ceil(j/12),L=e=>{let{url:t,description:n,imageAquascapeType:r,lastEdited:i,onClose:a,onEdit:s}=e;return t?(0,wE.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:t,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("div",{className:"coral-name-label",children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("div",{className:"coral-name-value",children:r})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",i.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",i.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:s,children:"Edit"}),(0,wE.jsx)("button",{onClick:a,children:"Close"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("p",{children:n})})})]})})]})}):null},M=e=>{let{url:n,description:r,imageAquascapeType:i,lastEdited:a,onClose:s,onSaveEdit:o,imageId:l}=e;const[c,u]=(0,t.useState)(r),[d,h]=(0,t.useState)(i);(0,t.useEffect)((()=>{u(r),h(i)}),[r,i]);return(0,wE.jsx)("div",{className:"modal-backdrop",onClick:s,children:(0,wE.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,wE.jsx)("div",{className:"modal-image-container",children:(0,wE.jsx)("img",{src:n,alt:"Full Size"})}),(0,wE.jsx)("table",{className:"modal-info-table",children:(0,wE.jsxs)("tbody",{children:[(0,wE.jsxs)("tr",{children:[(0,wE.jsxs)("td",{className:"coral-name-cell",children:[(0,wE.jsx)("p",{children:(0,wE.jsx)("b",{children:"Aquascape Type:"})}),(0,wE.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"modal-edit-coral-name-input"})]}),(0,wE.jsxs)("td",{className:"last-edited-cell",children:["Last Edited: ",a.lastEdited,(0,wE.jsx)("br",{}),"Edited by: ",a.editedBy]}),(0,wE.jsxs)("td",{className:"modal-buttons-cell",children:[(0,wE.jsx)("button",{onClick:()=>{c&&d?C?(o(C,c,d),s()):alert("Error: Image ID is missing."):alert("Please fill out all fields before saving.")},children:"Save"}),(0,wE.jsx)("button",{onClick:s,children:"Dismiss"})]})]}),(0,wE.jsx)("tr",{children:(0,wE.jsx)("td",{colSpan:"3",className:"modal-description-cell",children:(0,wE.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),className:"modal-edit-description-input"})})})]})})]})})};(0,t.useEffect)((()=>{(async()=>{try{const e=np(yE,"fishtankfurniture"),t=await Wp(e);let n=[];for(const r of t.docs){const e=r.data();let t=e.lastEditedBy||gE.currentUser.displayName||"Unknown";e.lastEditedBy||await Kp(r.ref,{lastEditedBy:t}),n.push({id:r.id,...e,description:e.description||"",lastEdited:e.lastEdited?e.lastEdited.toDate():new Date,lastEditedBy:t})}n.sort(((e,t)=>t.lastEdited-e.lastEdited)),i(n)}catch(e){console.error("Error fetching images:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{b(e||null)}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=gE.onAuthStateChanged((e=>{console.log("Auth State Changed: ",e),b(e)}));return()=>e()}),[]);return(0,wE.jsxs)("div",{className:"page-main-box",children:[(0,wE.jsxs)("div",{className:"page-inputbox",children:[(0,wE.jsxs)("div",{className:"page-input-boxes",children:[(0,wE.jsx)("input",{type:"text",id:"AquascapeTypeInput",name:"aquascapeType",className:"coral-name-input",placeholder:"Aquascape Type...",maxLength:"30",value:S,onChange:e=>{k(e.target.value)}}),(0,wE.jsx)("textarea",{id:"descriptionInput",name:"description",className:"description-input",placeholder:"Enter image description (max 300 characters)",maxLength:"255",rows:"4",onChange:e=>{_(e.target.value)},value:E})]}),(0,wE.jsxs)("div",{className:"page-input-box2",children:[(0,wE.jsx)("input",{type:"file",id:"imageUpload",name:"imageUpload",className:"file-box",value:x,onChange:e=>{n(e.target.files[0]),T(e.target.value)}}),(0,wE.jsx)("button",{className:"page-btn-upload",onClick:async()=>{if(!e)return;const t=AE(),n=_g(vE,"Aquascape Ideas/".concat(t)),r=w&&w.email||"Unknown";try{const a=await vg(n,e),s=await bg(a.ref),o=await Qp(np(yE,"fishtankfurniture"),{url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r});i((e=>[{id:o.id,url:s,imageName:t,description:E,aquascapeType:S,lastEdited:new Date,lastEditedBy:r},...e])),_(""),k(""),T("")}catch(a){console.error("Error uploading image or creating Firestore document:",a)}},children:"Upload"})]})]}),(0,wE.jsx)("div",{className:"page-images-list",children:P.map(((e,t)=>(0,wE.jsxs)("div",{className:"page-image-container",children:[(0,wE.jsx)("img",{src:e.url,className:"page-img-grid",onClick:()=>(async e=>{try{const t=rp(yE,"fishtankfurniture",e.id),n=await qp(t);if(n.exists()){const t=n.data();console.log("Fetched data for image click:",t),u(e.url),h(t.description),g(t.aquascapeType);let r="";t.lastEdited&&t.lastEdited.toDate instanceof Function&&(r=t.lastEdited.toDate().toLocaleString()),p({editedBy:t.lastEditedBy,lastEdited:r}),I(e.id),s(!0)}else console.log("No such document!")}catch(t){console.error("Error getting document:",t)}})(e)}),(0,wE.jsx)("button",{className:"page-btn",onClick:()=>(async(e,t,n)=>{if(console.log("Attempting to delete image with Name:",t),t.startsWith("Aquascape Ideas/")&&(t=t.replace("Aquascape Ideas/","")),window.confirm("Are you sure you want to delete this image?"))try{const a=_g(vE,"Aquascape Ideas/".concat(t));if(await Eg(a),!n){const t=rp(yE,"fishtankfurniture",e);await Gp(t)}i(r.filter((e=>e.imageName!==t))),alert("Image deleted successfully.")}catch(a){console.error("Error deleting image:",a),alert("Failed to delete image: "+a.message)}})(e.id,e.imageName),children:"Delete"})]},e.imageName)))}),(0,wE.jsxs)("div",{className:"pagination",children:[(0,wE.jsx)("button",{onClick:()=>A((e=>e>1?e-1:e)),children:"Prev"}),(0,wE.jsxs)("span",{children:["Page ",N," of ",O]}),(0,wE.jsx)("button",{onClick:()=>A((e=>e<O?e+1:e)),children:"Next"})]}),a&&(0,wE.jsx)(L,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onClose:()=>s(!1),onEdit:()=>{l(!0),s(!1)},imageId:C}),o&&(0,wE.jsx)(M,{url:c,description:d,imageAquascapeType:m,lastEdited:f,onSaveEdit:async(e,t,n)=>{if(console.log("onSaveEdit params:",{imageId:e,description:t,aquascapeType:n}),!e||void 0===t||void 0===n){let r="";return e||(r+="Image ID "),void 0===t&&(r+="Description "),void 0===n&&(r+="Aquascape Type "),void alert("Cannot save changes: Missing information (".concat(r.trim(),")"))}try{const a=w&&w.email||"Unknown",o=rp(yE,"fishtankfurniture",e);await Kp(o,{description:t,aquascapeType:n,lastEdited:new Date,lastEditedBy:a}),alert("Changes saved successfully!"),i((r=>r.map((r=>r.id===e?{...r,description:t,aquascapeType:n,lastEditedBy:a,lastEdited:new Date}:r))));try{const t=rp(yE,"fishtankfurniture",e),n=await qp(t);if(n.exists()){const e=n.data();h(e.description),g(e.aquascapeType)}else console.log("Document not found after update.")}catch(r){console.error("Error refetching the updated document:",r)}s(!0),l(!1)}catch(r){console.error("Error saving changes: ",r),alert("Failed to save changes: "+r.message)}},onClose:()=>{l(!1),s(!0)}})]})},e_=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(!1),[a,s]=(0,t.useState)(!0),o=J(),l=$();return(0,t.useEffect)((()=>{const e=function(e,t,n,r){return Qe(e).onAuthStateChanged(t,n,r)}(gE,(e=>{console.log("Auth state changed: ",e),n(e),s(!1)}));return()=>e()}),[]),(0,t.useEffect)((()=>{if(!a){const t=l.pathname.split("/").pop();console.log("Current Path Segment:",t);const n=["homepage","index","scoly","chalice","signup","monti","mushroom","nps","zoas","acro","favia","fishtank","aquascape"];e||["index","signup","homepage","index","scoly","chalice","signup","monti","mushroom","nps","zoas","acro","favia","fishtank","aquascape"].includes(t)?e&&!n.includes(t)&&(console.log("Authorized but wrong path - redirecting to homepage"),o("/corals/homepage",{replace:!0})):(console.log("Unauthorized access - redirecting to index"),o("/corals/index",{replace:!0}))}}),[e,l.pathname,o,a]),a?(0,wE.jsx)("div",{children:"Loading..."}):(0,wE.jsxs)("div",{className:"coral-main-page-container",children:[(0,wE.jsx)(bE,{user:e,onToggleDarkMode:()=>{i(!r),document.body.classList.toggle("dark-mode")},onNavigate:o}),(0,wE.jsxs)(fe,{children:[(0,wE.jsx)(de,{path:"index",element:(0,wE.jsx)(zE,{})}),(0,wE.jsx)(de,{path:"homepage",element:(0,wE.jsx)(zE,{})}),(0,wE.jsx)(de,{path:"acro",element:e?(0,wE.jsx)(XE,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"favia",element:e?(0,wE.jsx)(JE,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"chalice",element:e?(0,wE.jsx)(HE,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"scoly",element:e?(0,wE.jsx)(QE,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"monti",element:e?(0,wE.jsx)(WE,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"mushroom",element:e?(0,wE.jsx)(KE,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"nps",element:e?(0,wE.jsx)(GE,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"zoas",element:e?(0,wE.jsx)($E,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"fishtank",element:e?(0,wE.jsx)(ZE,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"aquascape",element:e?(0,wE.jsx)(YE,{}):(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"signup",element:(0,wE.jsx)(qE,{})}),(0,wE.jsx)(de,{path:"*",element:(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})})]}),(0,wE.jsx)(EE,{})]})};var t_=n(950),n_=n.t(t_,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(c_){}new Map;const r_=r.startTransition;n_.flushSync,r.useId;function i_(e){let{basename:n,children:r,future:i,window:a}=e,s=t.useRef();var o;null==s.current&&(s.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),f((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:d(t)}),null,o)));let l=s.current,[c,h]=t.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},m=t.useCallback((e=>{p&&r_?r_((()=>h(e))):h(e)}),[h,p]);return t.useLayoutEffect((()=>l.listen(m)),[l,m]),t.createElement(he,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var a_,s_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(a_||(a_={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(s_||(s_={}));const o_=function(){return(0,wE.jsx)(i_,{children:(0,wE.jsx)("div",{className:"App",children:(0,wE.jsxs)(fe,{children:[(0,wE.jsx)(de,{path:"/",element:(0,wE.jsx)(ue,{replace:!0,to:"/corals/index"})}),(0,wE.jsx)(de,{path:"/corals/*",element:(0,wE.jsx)(e_,{})})]})})})},l_=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:s}=t;n(e),r(e),i(e),a(e),s(e)}))};i.createRoot(document.getElementById("root")).render((0,wE.jsx)(t.StrictMode,{children:(0,wE.jsx)(o_,{})})),l_()})()})();
//# sourceMappingURL=main.7dd3824f.js.map